/**
 * Jencil 0.1.0
 *
 * Author:  lambdalisue
 * URL:     http://hashnote.net/
 * License: MIT License
 * 
 * Copyright (C) 2012 lambdalisue, hashnote.net allright reserved.
 *
 */
(function(){var W,N,C,O,y,R,f,d,L,t,q,F,g,S,B,K,A,v,T,x,l,c,r,D,h,e,b,M,w,Q,E,X,I,s,Y,z,j,H,V,i,m,u,U,P,n,J,G=[].slice,Z={}.hasOwnProperty,o=function(ad,ab){for(var aa in ab){if(Z.call(ab,aa)){ad[aa]=ab[aa]}}function ac(){this.constructor=ad}ac.prototype=ab.prototype;ad.prototype=new ac();ad.__super__=ab.prototype;return ad};window.namespace=function(af,aa,ac){var ai,ag,ad,ah,ae,ab;if(arguments.length<3){ae=[(typeof exports!=="undefined"?exports:window)].concat(G.call(arguments)),af=ae[0],aa=ae[1],ac=ae[2]}ag=af;ab=aa.split(".");for(ad=0,ah=ab.length;ad<ah;ad++){ai=ab[ad];af=af[ai]||(af[ai]={})}return ac(af,ag)};D=(function(){function aa(){}aa.prototype.createMemento=function(){throw new Error("NotImplementedError")};aa.prototype.setMemento=function(ab){throw new Error("NotImplementedError")};aa.validate=function(ab){if(!(ab.createMemento!=null)){throw new Error("Originator instance need `createMemento` method")}if(!(ab.setMemento!=null)){throw new Error("Originator instance need `setMemento` method")}};return aa})();f=(function(){function aa(ab){this._originator=ab;this._undoStack=[];this._redoStack=[]}aa.prototype.originator=function(ab){if(ab!=null){D.validate(ab);this._originator=ab;return this}return ab};aa.prototype.save=function(ab){ab=ab||this.originator().createMemento();this._undoStack.push(ab);return this._redoStack=[]};aa.prototype.undo=function(){var ab;if(!this.canUndo()){return false}ab=this.originator();this._redoStack.push(ab.createMemento());ab.setMemento(this._undoStack.pop());if(typeof ab.focus==="function"){ab.focus()}return true};aa.prototype.redo=function(){var ab;if(!this.canRedo()){return false}ab=this.originator();this._undoStack.push(ab.createMemento());ab.setMemento(this._redoStack.pop());if(typeof ab.focus==="function"){ab.focus()}return true};aa.prototype.canUndo=function(){return this._undoStack.length>0};aa.prototype.canRedo=function(){return this._redoStack.length>0};return aa})();M=(function(){function aa(ab,ac){this.document=ab;this.element=ac;this}aa.prototype._getCaret=function(){var ae,ad,ab,ac;if(this.document.selection!=null){ab=this.document.selection.createRange();ae=ab.duplicate();ae.moveToElementText(this.element);ae.setEndPoint("EndToEnd",ab);ac=ae.text.length-ab.text.length;ad=ac+ab.text.length}else{if(this.element.setSelectionRange!=null){ac=this.element.selectionStart;ad=this.element.selectionEnd}}return[ac,ad]};aa.prototype._setCaret=function(ae,ab){var ac,ad;ad=this.element.scrollTop;if(this.element.setSelectionRange!=null){this.element.setSelectionRange(ae,ab)}else{if(this.element.createTextRange){ac=this.element.createTextRange();ac.collapse(true);ac.moveStart("character",ae);ac.moveEnd("character",ab-ae);ac.select()}}this.element.focus();this.element.scrollTop=ad;return this};aa.prototype.caret=function(ac,ab){if((ac!=null)&&typeof ac==="array"){ab=ac[1];ac=ac[0]}if((ac!=null)&&!(ab!=null)){ab=ac}if((ac!=null)&&(ab!=null)){return this._setCaret(ac,ab)}return this._getCaret()};aa.prototype.caretMove=function(ae){var ad,ab,ac;ac=this.caret(),ab=ac[0],ad=ac[1];return this.caret(ab+ae,ad+ae)};aa.prototype.lineCaret=function(){var ae,ab,ad,ac;ac=this.caret(),ab=ac[0],ae=ac[1];ad=this.element.value;ab=ad.lastIndexOf("\n",ab-1)+1;ae=ad.indexOf("\n",ab);if(ae===-1){ae=ad.length}return[ab,ae]};aa.prototype._replace=function(ag,ah,ad){var ac,ab,ae,af;af=this.element.scrollTop;if(this.document.selection){this.element.focus();ae=document.selection.createRange();ae.text=ag;ae.select()}else{if(this.element.setSelectionRange){ab=this.element.value.substring(0,ah);ac=this.element.value.substring(ad);this.element.value=ab+ag+ac}}this.element.scrollTop=af;return this};aa.prototype._getText=function(){var ae,ab,ac,ad;if(this.document.selection!=null){ab=this.document.selection.createRange();return ab.text}else{if(this.element.setSelectionRange){ad=this.caret(),ac=ad[0],ae=ad[1];return this.element.value.substring(ac,ae)}}return null};aa.prototype._setText=function(ag,ac){var af,ab,ae,ad;ae=this.element.scrollTop;ad=this.caret(),ab=ad[0],af=ad[1];this._replace(ag,ab,af);af=ab+ag.length;if(!ac){ab=af}this.caret(ab,af);this.element.focus();this.element.scrollTop=ae;return this};aa.prototype.text=function(ac,ab){if(ac!=null){return this._setText(ac,ab)}return this._getText()};aa.prototype.line=function(){var ae,ab,ad,ac;ad=this.element.value;ac=this.lineCaret(),ab=ac[0],ae=ac[1];return ad.substr(ab,ae-ab)};aa.prototype.insertBefore=function(ah,ac){var af,ab,ae,ag,ad;ae=this.element.scrollTop;ad=this.caret(),ab=ad[0],af=ad[1];ag=this.text();this._replace(ah+ag,ab,af);af=ab+ah.length;if(!ac){ab=af}this.caret(ab,af);this.element.focus();this.element.scrollTop=ae;return this};aa.prototype.insertAfter=function(ah,ac){var af,ab,ae,ag,ad;ae=this.element.scrollTop;ad=this.caret(),ab=ad[0],af=ad[1];ag=this.text();this._replace(ag+ah,ab,af);ab=af;af=af+ah.length;if(!ac){ab=af}this.caret(ab,af);this.element.focus();this.element.scrollTop=ae;return this};aa.prototype.wrap=function(ag,ah,ac){var ae,aj,ab,af,ai,ad;ab=this.element.scrollTop;ai=this.text();if(ai.indexOf(ag)===0&&ai.lastIndexOf(ah)===(ai.length-ah.length)){af=ai.substring(ag.length,ai.length-ah.length);this.text(af,ac)}else{ad=this.caret(),aj=ad[0],ae=ad[1];this._replace(ag+ai+ah,aj,ae);ae=aj+ag.length+ai.length+ah.length;if(!ac){aj=ae}this.caret(aj,ae)}this.element.focus();this.element.scrollTop=ab;return this};return aa})();J=(function(){var aa,ao,ae,ad,ak,al,am,ac,ai,ab,ah,aj,an,ag,af;ah=function(ap){if(ap==null){ap=false}return this.outerWidth(ap)-this.width()};ab=function(ap){if(ap==null){ap=false}return this.outerHeight(ap)-this.height()};an=function(ap,aq){var ar;if(ap==null){ap=false}if(typeof ap==="number"){aq=ap;ap=false}if(aq!=null){ar=this.nonContentWidth(ap);return this.width(aq-ar)}return this._outerWidth(ap)};aj=function(ap,aq){var ar;if(ap==null){ap=false}if(typeof ap==="number"){aq=ap;ap=false}if(aq!=null){ar=this.nonContentHeight(ap);return this.height(aq-ar)}return this._outerHeight(ap)};ah=function(ap){if(ap==null){ap=false}return this.outerWidth(ap)-this.width()};ab=function(ap){if(ap==null){ap=false}return this.outerHeight(ap)-this.height()};ai=function(aq,ap){var ar;if(ap==null){ap=null}ar=this.css(aq);if(ar===""||ar==="none"||ar===null||ar===(void 0)||ar===NaN){return ap}ar=parseInt(ar,10);return ar};ac=function(){return this.ncss("min-width")};am=function(){return this.ncss("min-height")};al=function(){return this.ncss("max-width")};ak=function(){return this.ncss("max-height")};ae=function(ap){var at,ar,aq;if(ap==null){ap=false}ar=ap?this.ncss("margin-left"):0;at=this.ncss("border-left-width");aq=this.ncss("padding-left");return ar+at+aq};ad=function(ap){var at,ar,aq;if(ap==null){ap=false}ar=ap?this.ncss("margin-top"):0;at=this.ncss("border-top-width");aq=this.ncss("padding-top");return ar+at+aq};aa=function(ap){var aq;aq=this.offset();if(ap!=null){aq.left=ap;return this.offset(aq)}return aq.left};ao=function(ap){var aq;aq=this.offset();if(ap!=null){aq.top=ap;return this.offset(aq)}return aq.top};ag=function(ap,ar){var at,aq;if(ap==null){ap=false}if(typeof ap==="number"){ar=ap;ap=false}aq=J(this.parent());at=aq.absoluteX()+aq.contentX(ap);if(ar!=null){return this.absoluteX(ar+at)}return this.absoluteX()-at};af=function(ap,ar){var at,aq;if(ap==null){ap=false}if(typeof ap==="number"){ar=ap;ap=false}aq=J(this.parent());at=aq.absoluteY()+aq.contentY(ap);if(ar!=null){return this.absoluteY(ar+at)}return this.absoluteY()-at};J=function(ap){if(ap.__evoluted__===true){return ap}ap._outerWidth=ap.outerWidth;ap._outerHeight=ap.outerHeight;ap.nonContentWidth=ah;ap.nonContentHeight=ab;ap.outerWidth=an;ap.outerHeight=aj;ap.nonContentWidth=ah;ap.nonContentHeight=ab;ap.ncss=ai;ap.minWidth=ac;ap.minHeight=am;ap.maxWidth=al;ap.maxHeight=ak;ap.contentX=ae;ap.contentY=ad;ap.absoluteX=aa;ap.absoluteY=ao;ap.relativeX=ag;ap.relativeY=af;ap.__evoluted__=true;return ap};return J})();n=function(ab){var aa;ab.css("position","relative");aa=$("<div>").appendTo(ab).hide().css({position:"absolute",top:"0",left:"0",overflow:"hidden","z-index":99999});aa.on=function(){aa.refresh();return aa.show()};aa.refresh=function(){aa.width(ab.outerWidth(true));return aa.height(ab.outerHeight(true))};aa.off=function(){return aa.hide()};return aa};U=function(aa){var ad,ab,ac;aa=$.extend({start:0,end:100,duration:1000,callback:null,done:null,easing:null},aa);ab=U.now();ad=aa.end-aa.start;aa.easing=aa.easing||U.easings["default"];ac=function(){var af,ae;af=U.now()-ab;ae=aa.easing(af,0,1,aa.duration);ae=ae*ad+aa.start;aa.callback(ae,af);if(af<aa.duration){return setTimeout(ac,1)}else{aa.callback(aa.end,aa.duration);return typeof aa.done==="function"?aa.done():void 0}};ac();return null};U.now=function(){return(new Date()).getTime()};U.easings={"default":function(ab,ad,aa,ac){return jQuery.easing.swing(ab/ac,ab,ad,aa,ac)}};if(typeof exports!=="undefined"&&exports!==null){exports.animate=U}e=(function(){function aa(){}aa.prototype.mainPanelClass=null;aa.prototype.editorClass=null;aa.prototype.viewerClass=null;aa.prototype.helperClass=null;aa.prototype.buttons=null;return aa})();T=(function(){function aa(ab,ac){var ad=this;this.options=jQuery.extend({profile:aa.filetypes.html.HtmlProfile},ac);this.element=ab.hide();this.caretaker=new f();this.caretaker.originator=function(){return ad.editor()};this.wrapper=new u(this);this.fullscreen=new t(this);this.element.after(this.wrapper.element).after(this.fullscreen.element);this.wrapper.init();this.caretaker.save()}aa.prototype.editor=function(){return this.wrapper.workspace.mainPanel.editorPanel||null};aa.prototype.viewer=function(){return this.wrapper.workspace.mainPanel.viewerPanel||null};aa.prototype.helper=function(){return this.wrapper.workspace.mainPanel.helperPanel||null};return aa})();$.fn.jencil=function(aa){var ab;ab=$(this);return ab.data("Jencil",new T(ab,aa))};namespace("Jencil.profiles",function(aa){return aa.Profile=e});namespace("Jencil.utils",function(aa){return aa.namespace=namespace});i=(function(){function aa(ac,ab,ad){this.core=ac;if(ab==null){ab="<div>"}if(ab instanceof jQuery){this.element=ab}else{this.element=$(ab,ad)}this.element=J(this.element)}aa.prototype.init=function(){return this};aa.prototype.adjust=function(){return this};return aa})();h=(function(aa){o(ab,aa);function ab(ad,ac,ae){if(ac==null){ac="<div>"}ab.__super__.constructor.call(this,ad,ac,ae);this.element.addClass("panel")}return ab})(i);r=(function(ab){o(aa,ab);function aa(ae,af,ac,ah){var ag,ad,ai=this;this.fst=af;this.snd=ac;this.splitter=ah;aa.__super__.constructor.call(this,ae);this.element.addClass("multiple");this.element.append(this.fst.element);this.element.append(this.splitter.element);this.element.append(this.snd.element);ad=function(aj){if(!this.element.is(":visible")){return this.toggle(aj,null)}};ag=function(aj){if(this.element.is(":visible")){return this.toggle(null,aj)}};this.fst.toggle=function(ak,aj){return ai._togglePanel(0,ak,aj)};this.fst.show=ad;this.fst.hide=ag;this.snd.toggle=function(ak,aj){return ai._togglePanel(1,ak,aj)};this.snd.show=ad;this.snd.hide=ag}aa.prototype.init=function(){this.splitter.init();this.fst.init();return this.snd.init()};aa.prototype._togglePanel=function(ai,ag,ad){var af,ac,ae,ah=this;ae=this.splitter.volume();af=null;if((0<ae&&ae<1)){ac=ai;this.splitter._previousVolume=ae;af=ad}else{ac=this.splitter._previousVolume||this.splitter.defaultVolume;if(ac===ai){ac=0.5}af=ag}return U({done:af,start:ae,end:ac,duration:500,callback:function(ak,aj){return ah.splitter.volume(ak)}})};return aa})(h);j=(function(ab){o(aa,ab);function aa(ad,ae,ac,af){var ag;if(af==null){af=0.5}ag=new H(ad,ae,ac,af);aa.__super__.constructor.call(this,ad,ae,ac,ag);this.element.addClass("vertical")}aa.prototype.adjust=function(){this.fst.element.outerHeight(true,this.element.height());this.snd.element.outerHeight(true,this.element.height());this.splitter.element.outerHeight(true,this.element.height());this.splitter.adjust();return this};return aa})(r);S=(function(ab){o(aa,ab);function aa(ad,ae,ac,af){var ag;if(af==null){af=0.5}ag=new B(ad,ae,ac,af);aa.__super__.constructor.call(this,ad,ae,ac,ag);this.element.addClass("horizontal")}aa.prototype.adjust=function(){this.fst.element.outerWidth(true,this.element.width());this.snd.element.outerWidth(true,this.element.width());this.splitter.element.outerWidth(true,this.element.width());this.splitter.adjust();return this};return aa})(r);namespace("Jencil.ui.widgets",function(aa){return aa.Widget=i});namespace("Jencil.ui.widgets.panels",function(aa){aa.Panel=h;aa.MultiplePanel=r;aa.VerticalPanel=j;return aa.HorizontalPanel=S});Q=(function(aa){o(ab,aa);function ab(ad,ae,ac,af){var ag,ah,ai=this;this.fst=ae;this.snd=ac;this.defaultVolume=af!=null?af:0.5;ab.__super__.constructor.call(this,ad);this.element.addClass("splitter");this._volume=this.defaultVolume;ag=function(al){var ak,aj;ai.mousemove(al);if((ak=ai.fst.curtain)!=null){if(typeof ak.refresh==="function"){ak.refresh()}}if((aj=ai.snd.curtain)!=null){if(typeof aj.refresh==="function"){aj.refresh()}}al.stopPropagation();al.stopImmediatePropagation();return al.preventDefault()};ah=function(al){var am,ak,aj;am=$(window);am.unbind("mousemove",ag);am.unbind("mouseup",ah);if((ak=ai.fst.curtain)!=null){if(typeof ak.off==="function"){ak.off()}}if((aj=ai.snd.curtain)!=null){if(typeof aj.off==="function"){aj.off()}}al.stopPropagation();al.stopImmediatePropagation();return al.preventDefault()};this.element.mousedown(function(al){var am,ak,aj;am=$(window);am.mousemove(ag);am.mouseup(ah);if((ak=ai.fst.curtain)!=null){if(typeof ak.on==="function"){ak.on()}}if((aj=ai.snd.curtain)!=null){if(typeof aj.on==="function"){aj.on()}}al.stopPropagation();al.stopImmediatePropagation();return al.preventDefault()})}ab.prototype.init=function(){return this.container=J(this.element.parent())};ab.prototype.volume=function(ad,ac){if(ac==null){ac=false}if(ad!=null){this._volume=ad;if(!ac){this.adjust()}return this}return this._volume};ab.prototype.value=function(af,ae){var ac,ad;if(ae==null){ae=false}ac=this.valueWidth();if(af!=null){ad=af/ac;return this.volume(ad,ae)}return this.volume()*ac};ab.prototype.regulateValue=function(ad){var ae,ac;ac=this.minValue();ae=this.maxValue();if(ad<ac){ad=ac}if(ad>ae){ad=ae}return ad};return ab})(i);H=(function(aa){o(ab,aa);function ab(ae,af,ad,ag){var ah,ac;ab.__super__.constructor.call(this,ae,af,ad,ag);this.element.addClass("vertical");this.fst.element.addClass("left");this.snd.element.addClass("right");this.fst.element.css({"float":"left"});this.snd.element.css({"float":"left"});if((ah=this.fst.curtain)!=null){ah.css("pointer","col-resize")}if((ac=this.snd.curtain)!=null){ac.css("pointer","col-resize")}}ab.prototype.mousemove=function(ad){var ae,ac;ae=this.container.absoluteX()+this.container.contentX(true);ac=ad.pageX-ae;ac=this.regulateValue(ac);return this.value(ac)};ab.prototype.valueWidth=function(){return this.container.width()};ab.prototype.minValue=function(){var ad,ac;ad=this.fst.element.minWidth()+this.fst.element.nonContentWidth();ac=this.snd.element.maxWidth()+this.snd.element.nonContentWidth();if(ac!=null){ac=this.valueWidth()-ac}if((ad!=null)&&(ac!=null)){return Math.min(ad,ac)}return ad||ac||0};ab.prototype.maxValue=function(){var ae,ad,ac;ac=this.valueWidth();ae=this.fst.element.maxWidth()+this.fst.element.nonContentWidth();ad=this.snd.element.minWidth()+this.snd.element.nonContentWidth();if(ad!=null){ad=ac-ad}if((ae!=null)&&(ad!=null)){return Math.max(ae,ad)}return ae||ad||ac};ab.prototype.adjust=function(){var af,ae,ad,ac;ad=this.value();ac=this.valueWidth();af=ad-this.fst.element.nonContentWidth(true);ae=(ac-ad)-this.snd.element.nonContentWidth(true);if(af<=0){if(this.fst.element.is(":visible")){this.fst.element.hide()}if(!this.snd.element.is(":visible")){this.snd.element.show()}this.snd.element.outerWidth(true,ac);this._value=ad=0}else{if(ae<=0){if(!this.fst.element.is(":visible")){this.fst.element.show()}if(this.snd.element.is(":visible")){this.snd.element.hide()}this.fst.element.outerWidth(true,ac);this._value=ad=ac}else{if(!this.fst.element.is(":visible")){this.fst.element.show()}if(!this.snd.element.is(":visible")){this.snd.element.show()}this.fst.element.width(af);this.snd.element.width(ae)}}this.fst.adjust();this.snd.adjust();this.element.relativeX(ad-this.element.outerWidth()/2);return this};return ab})(Q);B=(function(ab){o(aa,ab);function aa(ae,af,ad,ag){var ah,ac;aa.__super__.constructor.call(this,ae,af,ad,ag);this.element.addClass("horizontal");this.fst.element.addClass("top");this.snd.element.addClass("bottom");if((ah=this.fst.curtain)!=null){ah.css("pointer","raw-resize")}if((ac=this.snd.curtain)!=null){ac.css("pointer","raw-resize")}}aa.prototype.mousemove=function(ad){var ae,ac;ae=this.container.absoluteY()+this.container.contentY(true);ac=ad.pageY-ae;ac=this.regulateValue(ac);return this.value(ac)};aa.prototype.valueWidth=function(){return this.container.height()};aa.prototype.minValue=function(){var ad,ac;ad=this.fst.element.minHeight()+this.fst.element.nonContentHeight();ac=this.snd.element.maxHeight()+this.snd.element.nonContentHeight();if(ac!=null){ac=this.valueWidth()-ac}if((ad!=null)&&(ac!=null)){return Math.min(ad,ac)}return ad||ac||0};aa.prototype.maxValue=function(){var ae,ad,ac;ac=this.valueWidth();ae=this.fst.element.maxHeight()+this.fst.element.nonContentHeight();ad=this.snd.element.minHeight()+this.snd.element.nonContentHeight();if(ad!=null){ad=ac-ad}if((ae!=null)&&(ad!=null)){return Math.max(ae,ad)}return ae||ad||ac};aa.prototype.adjust=function(){var af,ae,ad,ac;ad=this.value();ac=this.valueWidth();af=ad-this.fst.element.nonContentHeight(true);ae=(ac-ad)-this.snd.element.nonContentHeight(true);if(af<=0){if(this.fst.element.is(":visible")){this.fst.element.hide()}if(!this.snd.element.is(":visible")){this.snd.element.show()}this.snd.element.outerHeight(true,ac);this._value=ad=0}else{if(ae<=0){if(!this.fst.element.is(":visible")){this.fst.element.show()}if(this.snd.element.is(":visible")){this.snd.element.hide()}this.fst.element.outerHeight(true,ac);this._value=ad=ac}else{if(!this.fst.element.is(":visible")){this.fst.element.show()}if(!this.snd.element.is(":visible")){this.snd.element.show()}this.fst.element.height(af);this.snd.element.height(ae)}}this.fst.adjust();this.snd.adjust();this.element.relativeY(ad-this.element.outerHeight()/2);return this};return aa})(Q);namespace("Jencil.ui.widgets.splitters",function(aa){aa.Splitter=Q;aa.VerticalSplitter=H;return aa.HorizontalSplitter=B});O=(function(ab){o(aa,ab);function aa(ad,ac,ae){if(ac==null){ac="<div>"}aa.__super__.constructor.call(this,ad,ac,ae);this.element.addClass("editor");this._changeCallbacks=[]}aa.prototype.val=function(ac){throw new Error("NotImplementedError")};aa.prototype.change=function(af){var ae,ac,ad;if(af!=null){this._changeCallbacks.push(af);return this}ad=this._changeCallbacks;for(ae=0,ac=ad.length;ae<ac;ae++){af=ad[ae];af.call(this,this.val())}return this};aa.prototype.h1=null;aa.prototype.h2=null;aa.prototype.h3=null;aa.prototype.h4=null;aa.prototype.h5=null;aa.prototype.h6=null;aa.prototype.bold=null;aa.prototype.italic=null;aa.prototype.underline=null;aa.prototype.strike=null;aa.prototype.superscript=null;aa.prototype.subscript=null;aa.prototype.anchor=null;aa.prototype.image=null;aa.prototype.unorderedList=null;aa.prototype.orderedList=null;aa.prototype.indent=null;aa.prototype.outdent=null;return aa})(h);I=(function(aa){o(ab,aa);function ab(ad,ac,ae){var af=this;if(ac==null){ac="<div>"}ab.__super__.constructor.call(this,ad,ac,ae);this.textarea=$("<textarea>").appendTo(this.element).css({margin:"0",padding:"0",border:"none",outline:"none",resize:"none"});this.textarea=J(this.textarea);this.textarea.selection=new M(window.document,this.textarea.get(0));if($.fn.tabby!=null){this.textarea.tabby({tabString:"    "})}this.textarea.autoindent=function(aj){var ag,ai,ah;if(aj.which===13){af.core.caretaker.save();ah=af.textarea.selection.line();ag=ah.replace(/^(\s*).*$/,"$1");ai="\n"+ag;af.textarea.selection.insertAfter(ai,false);af.textarea.focus();aj.stopPropagation();aj.stopImmediatePropagation();aj.preventDefault();af.change();return false}};this.textarea.on("keydown",function(ag){return af.textarea.autoindent(ag)});this.textarea.on("click blur",function(){return af.change()})}ab.prototype.val=function(ac){if(ac!=null){this.textarea.val(ac);this.change();return this}return this.textarea.val()};ab.prototype.focus=function(){this.textarea.focus();return this};ab.prototype.createMemento=function(){return this.val()};ab.prototype.setMemento=function(ac){return this.val(ac)};ab.prototype.adjust=function(){this.textarea.outerWidth(this.element.width());this.textarea.outerHeight(this.element.height());return this};ab.prototype.wrap=function(ac,ad,ae){if(ae==null){ae=true}this.textarea.selection.wrap(ac,ad,ae);this.core.caretaker.save();this.change();return this};ab.prototype.selection=function(ad,ac){if(ac==null){ac=true}if(ad!=null){this.textarea.selection.text(ad,ac);this.core.caretaker.save();this.change();return this}return this.textarea.selection.text()};ab.prototype.insertBefore=function(ad,ac){if(ac==null){ac=true}this.textarea.selection.insertBefore(ad,ac);this.core.caretaker.save();return this};ab.prototype.insertAfter=function(ad,ac){if(ac==null){ac=true}this.textarea.selection.insertAfter(ad,ac);this.core.caretaker.save();return this};return ab})(O);namespace("Jencil.ui.widgets.editors",function(aa){aa.BaseEditor=O;return aa.TextEditor=I});y=(function(ab){o(aa,ab);function aa(ad,ac,ae){if(ac==null){ac="<div>"}aa.__super__.constructor.call(this,ad,ac,ae);this.element.addClass("viewer")}aa.prototype.update=function(ad,ac){throw new Error("NotImplementedError")};return aa})(h);X=(function(ab){o(aa,ab);function aa(ac){aa.__super__.constructor.call(this,ac);this.element.css({position:"relative"});this.curtain=n(this.element);this.iframe=$("<iframe>").appendTo(this.element).css({margin:"0",padding:"0",border:"none",outline:"none",resize:"none",width:"100%",height:"100%",overflow:"visible"});this.iframe.attr("frameborder",0);this.iframe=J(this.iframe);this.iframe.init=function(){var ad;ad=this.get(0);if(ad.contentDocument!=null){this.document=ad.contentDocument}else{this.document=ad.contentWindow.document}return this.document.write("<body></body>")};this.iframe.write=function(ad){var af;if(this.document!=null){try{af=this.document.documentElement.scrollTop}catch(ae){af=0}this.document.open();this.document.write(ad);this.document.close();this.document.documentElement.scrollTop=af;this.width(this.document.scrollLeft);this.height(this.document.scrollTop);return true}return false};this.iframe.loadTemplate=function(ad,ae){var af=this;return $.ajax({url:ad,success:function(ag){af._template=ag;return af.write(ae)}})}}aa.prototype.init=function(){return this.iframe.init()};aa.prototype.update=function(ad,ac){if(this.iframe._template!=null){ad=this.iframe._template.replace("{{content}}",ad)}else{if(this.templatePath!=null){this.iframe.loadTemplate(this.templatePath,ad)}}return this.iframe.write(ad)};aa.prototype.adjust=function(){this.iframe.outerWidth(this.element.width());this.iframe.outerHeight(this.element.height());return this};return aa})(y);N=(function(ab){o(aa,ab);function aa(ac,ad){this.config=ad;aa.__super__.constructor.call(this,ac);this.config=jQuery.extend({type:"GET",dataType:"text",data:function(ae){return encodeURIComponent(ae)},url:null},this.config)}aa.prototype.update=function(ad,ac){var ae=this;if(this._valueCache!==ad||ac){this._valueCache=ad;return $.ajax({type:this.config.type,dataType:this.config.dataType,data:JSON.stringify(this.config.data(ad)),url:this.config.url,success:function(af){if(ae.iframe._template!=null){af=ae.iframe._template.replace("{{content}}",af)}else{if(ae.templatePath!=null){ae.iframe.loadTemplate(ae.templatePath,af)}}return ae.iframe.write(af)}})}};return aa})(X);namespace("Jencil.ui.widgets.viewers",function(aa){aa.BaseViewer=y;aa.TemplateViewer=X;return aa.AjaxViewer=N});w=(function(aa){o(ab,aa);function ab(ac){ab.__super__.constructor.call(this,ac,"<span>");this.element.addClass("separator")}return ab})(i);R=(function(ab){o(aa,ab);function aa(ac,ad,af,ae){this.name=ad;this.text=af;this.title=ae;aa.__super__.constructor.call(this,ac,"<a>");this.text=this.text||this.name;this.title=this.title||this.text;this.element.addClass("button").addClass(ad);this.element.append($("<span>"+this.text+"</span>"));this.element.attr("title",this.title)}aa.prototype.enable=function(){return this.element.removeClass("disable")};aa.prototype.disable=function(){return this.element.addClass("disable")};aa.prototype.validate=function(){return this};return aa})(i);W=(function(ab){o(aa,ab);function aa(ad,ae,ag,af,ai,ac){var ah=this;this.shortcut=ac;aa.__super__.constructor.call(this,ad,ae,ag,af);this.callback=function(){if(!ah.element.hasClass("disable")){return ai()}};this.callback.raw=ai;this.element.click(function(){return ah.callback()});if((this.shortcut!=null)&&(window.shortcut!=null)){window.shortcut.add(this.shortcut,function(aj){return ah.callback()});this.element.attr("title",""+this.title+" ("+this.shortcut+")")}}return aa})(R);d=(function(aa){o(ab,aa);function ab(ad,ae,ah,ag,af,ac){var ai;this.command=af;ai=function(){var aj;aj=ad.editor();return aj[af].call(aj)};ab.__super__.constructor.call(this,ad,ae,ah,ag,ai,ac)}ab.prototype.validate=function(){var ac;ac=this.core.editor();if(!(ac[this.command]!=null)){this.disable()}return this};ab.factory=function(ad,af){var ai,ae,ac,ah,ag;ae=ah=ag=ai=ac=null;switch(af.length){case 5:ae=af[0];ah=af[1];ag=af[2];ai=af[3];ac=af[4];break;case 4:ae=af[0];ah=ag=af[1];ai=af[2];ac=af[3];break;case 3:ae=ai=af[0];ah=ag=af[1];ac=af[2];break;case 2:ae=ai=af[0];ah=ag=af[1];ac=null;break;case 1:ae=ai=ah=ag=af[0];ac=null}return new ab(ad,ae,ah,ag,ai,ac)};return ab})(W);z=(function(aa){o(ab,aa);function ab(ac){var ae,ad=this;ae=function(af){return ad.core.caretaker.undo()};ab.__super__.constructor.call(this,ac,"undo","Undo","Undo",ae,"Ctrl+Z")}ab.prototype.init=function(){var ac,ad=this;ac=function(){if(!ad.core.caretaker.canUndo()){ad.disable()}else{ad.enable()}return setTimeout(ac,100)};return ac()};return ab})(W);b=(function(ab){o(aa,ab);function aa(ac){var ae,ad=this;ae=function(af){return ad.core.caretaker.redo()};aa.__super__.constructor.call(this,ac,"redo","Redo","Redo",ae,"Ctrl+Shift+Z")}aa.prototype.init=function(){var ac,ad=this;ac=function(){if(!ad.core.caretaker.canRedo()){ad.disable()}else{ad.enable()}return setTimeout(ac,100)};return ac()};return aa})(W);q=(function(ab){o(aa,ab);function aa(ac){var ae,ad=this;ae=function(af){return ad.core.fullscreen.toggle()};aa.__super__.constructor.call(this,ac,"fullscreen","Toggle fullscreen","Fullscreen",ae,"Ctrl+F")}aa.prototype.init=function(){var ac,ad=this;ac=function(){if(ad.core.fullscreen.element.is(":visible")){ad.element.addClass("hide")}else{ad.element.removeClass("hide")}return setTimeout(ac,100)};return ac()};return aa})(W);V=(function(ab){o(aa,ab);function aa(ac){var ae,ad=this;ae=function(af){return ad.core.viewer().toggle()};aa.__super__.constructor.call(this,ac,"viewer","Toggle viewer","Viewer",ae)}aa.prototype.validate=function(){if(!this.core.viewer()){this.disable();return false}return true};aa.prototype.init=function(){var ac,ad=this;if(!this.validate()){return}ac=function(){if(ad.core.viewer().element.is(":visible")){ad.element.addClass("hide")}else{ad.element.removeClass("hide")}return setTimeout(ac,100)};return ac()};return aa})(W);g=(function(ab){o(aa,ab);function aa(ac){var ae,ad=this;ae=function(af){return ad.core.helper().toggle()};aa.__super__.constructor.call(this,ac,"helper","Toggle helper","Helper",ae)}aa.prototype.validate=function(){if(!this.core.helper()){this.disable();return false}return true};aa.prototype.init=function(){var ac,ad=this;if(!this.validate()){return}ac=function(){if(ad.core.helper().element.is(":visible")){ad.element.addClass("hide")}else{ad.element.removeClass("hide")}return setTimeout(ac,100)};return ac()};return aa})(W);P=function(aa,ab){if(ab instanceof Array){return d.factory(aa,ab)}if(typeof ab==="string"){switch(ab){case"Separator":return new w(aa);case"Undo":return new z(aa);case"Redo":return new b(aa);case"Fullscreen":return new q(aa);case"Viewer":return new V(aa);case"Helper":return new g(aa);default:throw new Exception(""+ab+" is not known Button type")}}return new ab(aa)};namespace("Jencil.ui.widgets.buttons",function(aa){aa.Separator=w;aa.Button=R;aa.ActionButton=W;aa.CommandButton=d;aa.UndoButton=z;aa.RedoButton=b;aa.FullscreenButton=q;aa.ViewerButton=V;return aa.HelperButton=g});u=(function(aa){o(ab,aa);function ab(ac){ab.__super__.constructor.call(this,ac);this.element.addClass("jencil wrapper");this.workspace=new m(this.core);this.workspace.element.appendTo(this.element)}ab.prototype.init=function(){var ac=this;if(this.element.resizable!=null){this.element.resizable({start:function(){var af,ad,ai,ah,ag,ae;if((af=ac.core.editor())!=null){if((ad=af.curtain)!=null){ad.on()}}if((ai=ac.core.viewer())!=null){if((ah=ai.curtain)!=null){ah.on()}}return(ag=ac.core.helper())!=null?(ae=ag.curtain)!=null?ae.on():void 0:void 0},resize:function(){var af,ad,ai,ah,ag,ae;if((af=ac.core.editor())!=null){if((ad=af.curtain)!=null){ad.refresh()}}if((ai=ac.core.viewer())!=null){if((ah=ai.curtain)!=null){ah.refresh()}}if((ag=ac.core.helper())!=null){if((ae=ag.curtain)!=null){ae.refresh()}}return ac.adjust()},stop:function(){var af,ad,ai,ah,ag,ae;if((af=ac.core.editor())!=null){if((ad=af.curtain)!=null){ad.off()}}if((ai=ac.core.viewer())!=null){if((ah=ai.curtain)!=null){ah.off()}}if((ag=ac.core.helper())!=null){if((ae=ag.curtain)!=null){ae.off()}}return ac.adjust()}})}this.workspace.init();return this.adjust()};ab.prototype.adjust=function(){this.workspace.element.outerWidth(true,this.element.width());this.workspace.element.outerHeight(true,this.element.height());this.workspace.adjust();return this};return ab})(h);m=(function(ab){o(aa,ab);function aa(ac){aa.__super__.constructor.call(this,ac);this.element.addClass("workspace");this.profile(new ac.options.profile)}aa.prototype.profile=function(ag){var af,aj,ah,ae,ad,ai,ac;if(ag!=null){this.element.empty();this.mainPanel=new ag.mainPanelClass(this.core,ag);this.toolbar=new s(this.core);ai=ag.toolbarButtons;for(aj=0,ae=ai.length;aj<ae;aj++){af=ai[aj];af=P(this.core,af);this.toolbar.addButton(af)}this.statusbar=new E(this.core);ac=ag.statusbarButtons;for(ah=0,ad=ac.length;ah<ad;ah++){af=ac[ah];af=P(this.core,af);this.statusbar.addButton(af)}this.element.append(this.toolbar.element);this.element.append(this.mainPanel.element);this.element.append(this.statusbar.element);this._profile=ag;return this}return this._profile};aa.prototype.init=function(){this.toolbar.init();this.statusbar.init();this.mainPanel.init();return this.adjust()};aa.prototype.adjust=function(){var ac;this.toolbar.element.outerWidth(true,this.element.width());this.statusbar.element.outerWidth(true,this.element.width());this.mainPanel.element.outerWidth(true,this.element.width());this.toolbar.adjust();this.statusbar.adjust();ac=this.toolbar.element.outerHeight(true)+this.statusbar.element.outerHeight(true);this.mainPanel.element.outerHeight(true,this.element.height()-ac);this.mainPanel.adjust();return this};aa.prototype.update=function(){if(this.mainPanel.editorPanel&&this.mainPanel.viewerPanel){return this.mainPanel.viewerPanel.update(this.mainPanel.editorPanel.val())}};return aa})(h);C=(function(ab){o(aa,ab);function aa(ac){aa.__super__.constructor.call(this,ac);this._buttons=[]}aa.prototype.init=function(){var ad,af,ac,ae;ae=this._buttons;for(af=0,ac=ae.length;af<ac;af++){ad=ae[af];ad.init()}return this};aa.prototype.addButton=function(ac){this._buttons.push(ac);return this.element.append(ac.element)};return aa})(h);s=(function(ab){o(aa,ab);function aa(ac){aa.__super__.constructor.call(this,ac);this.element.addClass("toolbar")}return aa})(C);E=(function(ab){o(aa,ab);function aa(ac){aa.__super__.constructor.call(this,ac);this.element.addClass("statusbar")}return aa})(C);c=(function(){function aa(ab,ad){var ac;ac=new ad.editorClass(ab);ac.element.addClass("mainPanel");return ac}return aa})();L=(function(ab){o(aa,ab);function aa(ac,ad){var ae=this;this.editorPanel=new ad.editorClass(ac);this.viewerPanel=new ad.viewerClass(ac);aa.__super__.constructor.call(this,ac,this.editorPanel,this.viewerPanel,ad.defaultVolume);this.element.addClass("mainPanel");this.editorPanel.change(function(af){return ae.viewerPanel.update(af)})}return aa})(j);Y=(function(ab){o(aa,ab);function aa(ac,ad){var ae=this;this.editorPanel=new ad.editorClass(ac);this.viewerPanel=new ad.viewerClass(ac);this.helperPanel=new ad.helperClass(ac);this.verticalPanel=new j(ac,this.editorPanel,this.viewerPanel,ad.defaultVolume);aa.__super__.constructor.call(this,this.verticalPanel,this.helperPanel,ad.defaultVolume2);this.element.addClass("mainPanel");this.editorPanel.change(function(af){return ae.viewerPanel.update(af)})}return aa})(S);namespace("Jencil.ui.widgets.panels",function(aa){aa.MonomainPanel=c;aa.DimainPanel=L;return aa.TrimainPanel=Y});t=(function(ab){o(aa,ab);function aa(ac){var ad=this;aa.__super__.constructor.call(this,ac);this.element.addClass("fullscreen");this.element.css({display:"table",position:"fixed",top:"0",left:"0",width:"100%",height:"100%"});this.curtain=J($("<div>").addClass("curtain"));this.curtain.css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%",background:"black",opacity:"0.6"});this.cell=J($("<div>").css({display:"table-cell","vertical-align":"middle",width:"95%",height:"95%"}));if($.browser.msie&&$.browser.version<7){this.element.css("position","absolute");$(window).scroll(function(){return ad.element.css("top",$(document).scrollTop())})}this.curtain.click(function(){return ad.off()});this.element.append(this.curtain);this.element.append(this.cell);this.element.hide();this.resize=function(){return ad.core.wrapper.adjust()}}aa.prototype.on=function(){var ac=this;this._width=this.core.wrapper.element.css("width");this._height=this.core.wrapper.element.css("height");this.core.wrapper.element.css("width","90%");this.core.wrapper.element.css("height","90%");this.cell.append(this.core.wrapper.element);this.element.fadeIn("fast",function(){ac.core.wrapper.init();ac.core.wrapper.adjust();return ac.core.wrapper.workspace.update(true)});return $(window).on("resize",this.resize)};aa.prototype.off=function(){var ac=this;this.core.wrapper.element.css("width",this._width);this.core.wrapper.element.css("height",this._height);this.core.element.after(this.core.wrapper.element);this.element.fadeOut("fast",function(){ac.core.wrapper.init();ac.core.wrapper.adjust();return ac.core.wrapper.workspace.update(true)});return $(window).unbind("resize",this.resize)};aa.prototype.toggle=function(ad,ac){if(this.element.is(":visible")){this.off();return typeof ac==="function"?ac():void 0}else{this.on();return typeof ad==="function"?ad():void 0}};return aa})(h);K=(function(ab){o(aa,ab);function aa(){return aa.__super__.constructor.apply(this,arguments)}aa.prototype.h1=function(){return this.wrap("<h1>","</h1>")};aa.prototype.h2=function(){return this.wrap("<h2>","</h2>")};aa.prototype.h3=function(){return this.wrap("<h3>","</h3>")};aa.prototype.h4=function(){return this.wrap("<h4>","</h4>")};aa.prototype.h5=function(){return this.wrap("<h5>","</h5>")};aa.prototype.h6=function(){return this.wrap("<h6>","</h6>")};aa.prototype.bold=function(){return this.wrap("<b>","</b>")};aa.prototype.italic=function(){return this.wrap("<i>","</i>")};aa.prototype.underline=function(){return this.wrap("<u>","</u>")};aa.prototype.strike=function(){return this.wrap("<s>","</s>")};aa.prototype.superscript=function(){return this.wrap("<sup>","</sup>")};aa.prototype.subscript=function(){return this.wrap("<sub>","</sub>")};aa.prototype.anchor=function(){var ac,ad;ad=this.selection();if(!ad){ad=window.prompt("Please input a link text","Here")}ac=window.prompt("Please input a link url","http://");if(!(ac!=null)){return}return this.selection("<a href='"+ac+"'>"+ad+"</a>")};aa.prototype.image=function(){var ac,ad;ad=window.prompt("Please input a image url","http://");ac=window.prompt("(Optional) Please input a alt message","Image");if(!(ad!=null)){return}return this.selection("<img src='"+ad+"' alt='"+ac+"'>")};aa.prototype.unorderedList=function(){var ad,ac;ad=this.selection();ad=(function(){var ah,af,ag,ae;ag=ad.split("\n");ae=[];for(ah=0,af=ag.length;ah<af;ah++){ac=ag[ah];ae.push("  <li>"+ac+"</li>")}return ae})();ad.unshift("<ul>");ad.push("</ul>");return this.selection(ad.join("\n"))};aa.prototype.orderedList=function(){var ad,ac;ad=this.selection();ad=(function(){var ah,af,ag,ae;ag=ad.split("\n");ae=[];for(ah=0,af=ag.length;ah<af;ah++){ac=ag[ah];ae.push("  <li>"+ac+"</li>")}return ae})();ad.unshift("<ol>");ad.push("</ol>");return this.selection(ad.join("\n"))};aa.prototype.indent=function(){var ad,ac;ad=this.selection();ad=(function(){var ah,af,ag,ae;ag=ad.split("\n");ae=[];for(ah=0,af=ag.length;ah<af;ah++){ac=ag[ah];ae.push("  "+ac)}return ae})();ad.unshift("<div style='margin-left: 4em'>");ad.push("</div>");return this.selection(ad.join("\n"))};aa.prototype.outdent=function(){var ad,ac;ad=this.selection();ad=(function(){var ah,af,ag,ae;ag=ad.split("\n");ae=[];for(ah=0,af=ag.length;ah<af;ah++){ac=ag[ah];ae.push("  "+ac)}return ae})();ad.unshift("<div style='margin-left: -4em'>");ad.push("</div>");return this.selection(ad.join("\n"))};return aa})(T.ui.widgets.editors.TextEditor);v=T.ui.widgets.viewers.TemplateViewer;A=(function(ab){o(aa,ab);function aa(){this.mainPanelClass=T.ui.widgets.panels.DimainPanel;this.editorClass=K;this.viewerClass=v;this.helperClass=T.ui.widgets.panels.Panel;this.toolbarButtons=["Undo","Redo","Separator",["h1","H1"],["h2","H2"],["h3","H3"],["h4","H4"],["h5","H5"],["h6","H6"],"Separator",["bold","Bold","Ctrl+B"],["italic","Italic","Ctrl+I"],["underline","Underline","Ctrl+U"],["strike","Strikeout"],["superscript","Superscript"],["subscript","Subscript"],"Separator",["anchor","Anchor link"],["image","Image"],["unorderedList","Unordered list"],["orderedList","Ordered list"],["indent","Indent"],["outdent","Outdent"],"Separator","Fullscreen"];this.statusbarButtons=["Viewer","Helper"]}return aa})(T.profiles.Profile);T.utils.namespace("Jencil.filetypes.html",function(aa){aa.HtmlEditor=K;aa.HtmlViewer=v;return aa.HtmlProfile=A});l=(function(ab){o(aa,ab);function aa(ac){var ad;ad={type:"POST",dataType:"text",data:function(ae){return{text:ae,mode:"markdown"}},url:"https://api.github.com/markdown"};aa.__super__.constructor.call(this,ac,ad)}return aa})(N);F=(function(ab){o(aa,ab);function aa(ac){var ad;ad={type:"POST",dataType:"text",data:function(ae){return{text:ae,mode:"gfm"}},url:"https://api.github.com/markdown"};aa.__super__.constructor.call(this,ac,ad)}return aa})(N);x=(function(ab){o(aa,ab);function aa(){return aa.__super__.constructor.apply(this,arguments)}aa.prototype.h1=function(){return this.insertBefore("# ")};aa.prototype.h2=function(){return this.insertBefore("## ")};aa.prototype.h3=function(){return this.insertBefore("### ")};aa.prototype.h4=function(){return this.insertBefore("#### ")};aa.prototype.h5=function(){return this.insertBefore("##### ")};aa.prototype.h6=function(){return this.insertBefore("###### ")};aa.prototype.bold=function(){return this.wrap("**","**")};aa.prototype.italic=function(){return this.wrap("*","*")};aa.prototype.anchor=function(){var ac,ad;ad=this.selection();if(!ad){ad=window.prompt("Please input a link text","Here")}ac=window.prompt("Please input a link url","http://");return this.selection("["+ad+"]("+ac+")")};aa.prototype.image=function(){var ac,ad;ad=window.prompt("Please input a image url","http://");ac=window.prompt("(Optional) Please input a alt message","Image");return this.selection("!["+ac+"]("+ad+")")};aa.prototype.unorderedList=function(){var ad,ac;ad=this.selection();ad=(function(){var ah,af,ag,ae;ag=ad.split("\n");ae=[];for(ah=0,af=ag.length;ah<af;ah++){ac=ag[ah];ae.push("-   "+ac)}return ae})();ad.unshift("");ad.push("");return this.selection(ad.join("\n"))};aa.prototype.orderedList=function(){var ad,ae,ac;ae=this.selection();ae=(function(){var ai,ag,ah,af;ah=ae.split("\n");af=[];for(ad=ai=0,ag=ah.length;ai<ag;ad=++ai){ac=ah[ad];af.push(""+ad+". "+ac)}return af})();ae.unshift("");ae.push("");return this.selection(ae.join("\n"))};aa.prototype.indent=function(){var ad,ac;ad=this.selection();ad=(function(){var ah,af,ag,ae;ag=ad.split("\n");ae=[];for(ah=0,af=ag.length;ah<af;ah++){ac=ag[ah];ae.push("  "+ac)}return ae})();ad.unshift("");ad.push("");return this.selection(ad.join("\n"))};return aa})(K)}).call(this);(function(e){e.fn.tabby=function(g){var h=e.extend({},e.fn.tabby.defaults,g);var i=e.fn.tabby.pressed;return this.each(function(){$this=e(this);var j=e.meta?e.extend({},h,$this.data()):h;$this.bind("keydown",function(m){var l=e.fn.tabby.catch_kc(m);if(16==l){i.shft=true}if(17==l){i.ctrl=true;setTimeout("$.fn.tabby.pressed.ctrl = false;",1000)}if(18==l){i.alt=true;setTimeout("$.fn.tabby.pressed.alt = false;",1000)}if(9==l&&!i.ctrl&&!i.alt){m.preventDefault;i.last=l;setTimeout("$.fn.tabby.pressed.last = null;",0);f(e(m.target).get(0),i.shft,j);return false}}).bind("keyup",function(l){if(16==e.fn.tabby.catch_kc(l)){i.shft=false}}).bind("blur",function(l){if(9==i.last){e(l.target).one("focus",function(m){i.last=null}).get(0).focus()}})})};e.fn.tabby.catch_kc=function(g){return g.keyCode?g.keyCode:g.charCode?g.charCode:g.which};e.fn.tabby.pressed={shft:false,ctrl:false,alt:false,last:null};function c(g){if(window.console&&window.console.log){window.console.log("textarea count: "+g.size())}}function f(j,i,h){var g=j.scrollTop;if(j.setSelectionRange){b(j,i,h)}else{if(document.selection){d(j,i,h)}}j.scrollTop=g}e.fn.tabby.defaults={tabString:String.fromCharCode(9)};function b(l,g,x){var w=l.selectionStart;var u=l.selectionEnd;if(w==u){if(g){if("\t"==l.value.substring(w-x.tabString.length,w)){l.value=l.value.substring(0,w-x.tabString.length)+l.value.substring(w);l.focus();l.setSelectionRange(w-x.tabString.length,w-x.tabString.length)}else{if("\t"==l.value.substring(w,w+x.tabString.length)){l.value=l.value.substring(0,w)+l.value.substring(w+x.tabString.length);l.focus();l.setSelectionRange(w,w)}}}else{l.value=l.value.substring(0,w)+x.tabString+l.value.substring(w);l.focus();l.setSelectionRange(w+x.tabString.length,w+x.tabString.length)}}else{var y=l.value.split("\n");var v=new Array();var n=0;var j=0;var h=false;for(var r in y){j=n+y[r].length;v.push({start:n,end:j,selected:(n<=w&&j>w)||(j>=u&&n<u)||(n>w&&j<u)});n=j+1}var m=0;for(var r in v){if(v[r].selected){var t=v[r].start+m;if(g&&x.tabString==l.value.substring(t,t+x.tabString.length)){l.value=l.value.substring(0,t)+l.value.substring(t+x.tabString.length);m-=x.tabString.length}else{if(!g){l.value=l.value.substring(0,t)+x.tabString+l.value.substring(t);m+=x.tabString.length}}}}l.focus();var s=w+((m>0)?x.tabString.length:(m<0)?-x.tabString.length:0);var q=u+m;l.setSelectionRange(s,q)}}function d(t,z,g){var s=document.selection.createRange();if(t==s.parentElement()){if(""==s.text){if(z){var n=s.getBookmark();s.moveStart("character",-g.tabString.length);if(g.tabString==s.text){s.text=""}else{s.moveToBookmark(n);s.moveEnd("character",g.tabString.length);if(g.tabString==s.text){s.text=""}}s.collapse(true);s.select()}else{s.text=g.tabString;s.collapse(false);s.select()}}else{var m=s.text;var r=m.length;var x=m.split("\r\n");var C=document.body.createTextRange();C.moveToElementText(t);C.setEndPoint("EndToStart",s);var q=C.text;var A=q.split("\r\n");var u=q.length;var B=document.body.createTextRange();B.moveToElementText(t);B.setEndPoint("StartToEnd",s);var y=B.text;var h=document.body.createTextRange();h.moveToElementText(t);h.setEndPoint("StartToEnd",C);var v=h.text;var j=e(t).html();e("#r3").text(u+" + "+r+" + "+y.length+" = "+j.length);if((u+v.length)<j.length){A.push("");u+=2;if(z&&g.tabString==x[0].substring(0,g.tabString.length)){x[0]=x[0].substring(g.tabString.length)}else{if(!z){x[0]=g.tabString+x[0]}}}else{if(z&&g.tabString==A[A.length-1].substring(0,g.tabString.length)){A[A.length-1]=A[A.length-1].substring(g.tabString.length)}else{if(!z){A[A.length-1]=g.tabString+A[A.length-1]}}}for(var w=1;w<x.length;w++){if(z&&g.tabString==x[w].substring(0,g.tabString.length)){x[w]=x[w].substring(g.tabString.length)}else{if(!z){x[w]=g.tabString+x[w]}}}if(1==A.length&&0==u){if(z&&g.tabString==x[0].substring(0,g.tabString.length)){x[0]=x[0].substring(g.tabString.length)}else{if(!z){x[0]=g.tabString+x[0]}}}if((u+r+y.length)<j.length){x.push("");r+=2}C.text=A.join("\r\n");s.text=x.join("\r\n");var l=document.body.createTextRange();l.moveToElementText(t);if(0<u){l.setEndPoint("StartToEnd",C)}else{l.setEndPoint("StartToStart",C)}l.setEndPoint("EndToEnd",s);l.select()}}}})(jQuery);(function(L){var e=L.Markdown=function e(S){switch(typeof S){case"undefined":this.dialect=e.dialects.Gruber;break;case"object":this.dialect=S;break;default:if(S in e.dialects){this.dialect=e.dialects[S]}else{throw new Error("Unknown Markdown dialect '"+String(S)+"'")}break}this.em_state=[];this.strong_state=[];this.debug_indent=""};L.parse=function(U,S){var T=new e(S);return T.toTree(U)};L.toHTML=function v(V,U,T){var S=L.toHTMLTree(V,U,T);return L.renderJsonML(S)};L.toHTMLTree=function x(T,X,V){if(typeof T==="string"){T=this.parse(T,X)}var U=D(T),S={};if(U&&U.references){S=U.references}var W=i(T,S,V);r(W);return W};function f(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function I(){var S=require("util");return"Markdown.mk_block( "+S.inspect(this.toString())+", "+S.inspect(this.trailing)+", "+S.inspect(this.lineNumber)+" )"}var g=e.mk_block=function(V,T,S){if(arguments.length==1){T="\n\n"}var U=new String(V);U.trailing=T;U.inspect=I;U.toSource=f;if(S!=undefined){U.lineNumber=S}return U};function H(T){var U=0,S=-1;while((S=T.indexOf("\n",S+1))!==-1){U++}return U}e.prototype.split_blocks=function A(U,X){var V=/([\s\S]+?)($|\n(?:\s*\n|$)+)/g,W=[],S;var T=1;if((S=/^(\s*\n)/.exec(U))!=null){T+=H(S[0]);V.lastIndex=S[0].length}while((S=V.exec(U))!==null){W.push(g(S[1],S[2],T));T+=H(S[0])}return W};e.prototype.processBlock=function N(X,W){var T=this.dialect.block,S=T.__order__;if("__call__" in T){return T.__call__.call(this,X,W)}for(var V=0;V<S.length;V++){var U=T[S[V]].call(this,X,W);if(U){if(!B(U)||(U.length>0&&!(B(U[0])))){this.debug(S[V],"didn't return a proper array")}return U}}return[]};e.prototype.processInline=function h(S){return this.dialect.inline.__call__.call(this,String(S))};e.prototype.toTree=function J(U,T){var V=U instanceof Array?U:this.split_blocks(U);var W=this.tree;try{this.tree=T||this.tree||["markdown"];V:while(V.length){var S=this.processBlock(V.shift(),V);if(!S.length){continue V}this.tree.push.apply(this.tree,S)}return this.tree}finally{if(T){this.tree=W}}};e.prototype.debug=function(){var S=Array.prototype.slice.call(arguments);S.unshift(this.debug_indent);if(typeof print!=="undefined"){print.apply(print,S)}if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log.apply(null,S)}};e.prototype.loop_re_over_block=function(V,W,U){var T,S=W.valueOf();while(S.length&&(T=V.exec(S))!=null){S=S.substr(T[0].length);U.call(this,T)}return S};e.dialects={};e.dialects.Gruber={block:{atxHeader:function t(U,T){var S=U.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!S){return undefined}var V=["header",{level:S[1].length}];Array.prototype.push.apply(V,this.processInline(S[2]));if(S[0].length<U.length){T.unshift(g(U.substr(S[0].length),U.trailing,U.lineNumber+2))}return[V]},setextHeader:function y(U,T){var S=U.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!S){return undefined}var W=(S[2]==="=")?1:2;var V=["header",{level:W},S[1]];if(S[0].length<U.length){T.unshift(g(U.substr(S[0].length),U.trailing,U.lineNumber+2))}return[V]},code:function m(X,W){var U=[],V=/^(?: {0,3}\t| {4})(.*)\n?/,T;if(!X.match(V)){return undefined}block_search:do{var S=this.loop_re_over_block(V,X.valueOf(),function(Y){U.push(Y[1])});if(S.length){W.unshift(g(S,X.trailing));break block_search}else{if(W.length){if(!W[0].match(V)){break block_search}U.push(X.trailing.replace(/[^\n]/g,"").substring(2));X=W.shift()}else{break block_search}}}while(true);return[["code_block",U.join("\n")]]},horizRule:function Q(U,T){var S=U.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!S){return undefined}var V=[["hr"]];if(S[1]){V.unshift.apply(V,this.processBlock(S[1],[]))}if(S[3]){T.unshift(g(S[3]))}return V},lists:(function(){var V="[*+-]|\\d+\\.",T=/[*+-]/,ab=/\d+\./,Z=new RegExp("^( {0,3})("+V+")[ \t]+"),U="(?: {0,3}\\t| {4})";function W(ac){return new RegExp("(?:^("+U+"{0,"+ac+"} {0,3})("+V+")\\s+)|(^"+U+"{0,"+(ac-1)+"}[ ]{0,4})")}function S(ac){return ac.replace(/ {0,3}\t/g,"    ")}function aa(ad,aj,ai,ae){if(aj){ad.push(["para"].concat(ai));return}var ac=ad[ad.length-1] instanceof Array&&ad[ad.length-1][0]=="para"?ad[ad.length-1]:ad;if(ae&&ad.length>1){ai.unshift(ae)}for(var ag=0;ag<ai.length;ag++){var ah=ai[ag],af=typeof ah=="string";if(af&&ac.length>1&&typeof ac[ac.length-1]=="string"){ac[ac.length-1]+=ah}else{ac.push(ah)}}}function X(ai,ah){var ag=new RegExp("^("+U+"{"+ai+"}.*?\\n?)*$"),af=new RegExp("^"+U+"{"+ai+"}","gm"),ae=[];while(ah.length>0){if(ag.exec(ah[0])){var ad=ah.shift(),ac=ad.replace(af,"");ae.push(g(ac,ad.trailing,ad.lineNumber))}break}return ae}function Y(af,ae,ac){var ah=af.list;var ag=ah[ah.length-1];if(ag[1] instanceof Array&&ag[1][0]=="para"){return}if(ae+1==ac.length){ag.push(["para"].concat(ag.splice(1)))}else{var ad=ag.pop();ag.push(["para"].concat(ag.splice(1)),ad)}}return function(ah,an){var ao=ah.match(Z);if(!ao){return undefined}function af(ay){var az=T.exec(ay[2])?["bulletlist"]:["numberlist"];ag.push({list:az,indent:ay[1]});return az}var ag=[],at=af(ao),ae,am=false,ax=[ag[0].list],aq;loose_search:while(true){var ac=ah.split(/(?=\n)/);var au="";tight_search:for(var av=0;av<ac.length;av++){var ad="",ap=ac[av].replace(/^\n/,function(ay){ad=ay;return""});var ak=W(ag.length);ao=ap.match(ak);if(ao[1]!==undefined){if(au.length){aa(ae,am,this.processInline(au),ad);am=false;au=""}ao[1]=S(ao[1]);var ai=Math.floor(ao[1].length/4)+1;if(ai>ag.length){at=af(ao);ae.push(at);ae=at[1]=["listitem"]}else{var al=false;for(aq=0;aq<ag.length;aq++){if(ag[aq].indent!=ao[1]){continue}at=ag[aq].list;ag.splice(aq+1);al=true;break}if(!al){ai++;if(ai<=ag.length){ag.splice(ai);at=ag[ai-1].list}else{at=af(ao);ae.push(at)}}ae=["listitem"];at.push(ae)}ad=""}if(ap.length>ao[0].length){au+=ad+ap.substr(ao[0].length)}}if(au.length){aa(ae,am,this.processInline(au),ad);am=false;au=""}var ar=X(ag.length,an);if(ar.length>0){c(ag,Y,this);ae.push.apply(ae,this.toTree(ar,[]))}var aj=an[0]&&an[0].valueOf()||"";if(aj.match(Z)||aj.match(/^ /)){ah=an.shift();var aw=this.dialect.block.horizRule(ah,an);if(aw){ax.push.apply(ax,aw);break}c(ag,Y,this);am=true;continue loose_search}break}return ax}})(),blockquote:function M(X,V){if(!X.match(/^>/m)){return undefined}var Z=[];if(X[0]!=">"){var T=X.split(/\n/),W=[];while(T.length&&T[0][0]!=">"){W.push(T.shift())}X=T.join("\n");Z.push.apply(Z,this.processBlock(W.join("\n"),[]))}while(V.length&&V[0][0]==">"){var S=V.shift();X=new String(X+X.trailing+S);X.trailing=S.trailing}var U=X.replace(/^> ?/gm,""),Y=this.tree;Z.push(this.toTree(U,["blockquote"]));return Z},referenceDefn:function K(W,V){var U=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(!W.match(U)){return undefined}if(!D(this.tree)){this.tree.splice(1,0,{})}var T=D(this.tree);if(T.references===undefined){T.references={}}var S=this.loop_re_over_block(U,W,function(X){if(X[2]&&X[2][0]=="<"&&X[2][X[2].length-1]==">"){X[2]=X[2].substring(1,X[2].length-1)}var Y=T.references[X[1].toLowerCase()]={href:X[2]};if(X[4]!==undefined){Y.title=X[4]}else{if(X[5]!==undefined){Y.title=X[5]}}});if(S.length){V.unshift(g(S,W.trailing))}return[]},para:function E(T,S){return[["para"].concat(this.processInline(T))]}}};e.dialects.Gruber.inline={__oneElement__:function d(X,T,W){var S,U,Y=0;T=T||this.dialect.inline.__patterns__;var V=new RegExp("([\\s\\S]*?)("+(T.source||T)+")");S=V.exec(X);if(!S){return[X.length,X]}else{if(S[1]){return[S[1].length,S[1]]}}var U;if(S[2] in this.dialect.inline){U=this.dialect.inline[S[2]].call(this,X.substr(S.index),S,W||[])}U=U||[S[2].length,S[2]];return U},__call__:function s(W,U){var S=[],T;function V(X){if(typeof X=="string"&&typeof S[S.length-1]=="string"){S[S.length-1]+=X}else{S.push(X)}}while(W.length>0){T=this.dialect.inline.__oneElement__.call(this,W,U,S);W=W.substr(T.shift());c(T,V)}return S},"]":function(){},"}":function(){},"\\":function u(S){if(S.match(/^\\[\\`\*_{}\[\]()#\+.!\-]/)){return[2,S[1]]}else{return[1,"\\"]}},"![":function n(U){var S=U.match(/^!\[(.*?)\][ \t]*\([ \t]*(\S*)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(S){if(S[2]&&S[2][0]=="<"&&S[2][S[2].length-1]==">"){S[2]=S[2].substring(1,S[2].length-1)}S[2]=this.dialect.inline.__call__.call(this,S[2],/\\/)[0];var T={alt:S[1],href:S[2]||""};if(S[4]!==undefined){T.title=S[4]}return[S[0].length,["img",T]]}S=U.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/);if(S){return[S[0].length,["img_ref",{alt:S[1],ref:S[2].toLowerCase(),original:S[0]}]]}return[2,"!["]},"[":function o(ac){var Z=String(ac);var X=e.DialectHelpers.inline_until_char.call(this,ac.substr(1),"]");if(!X){return[1,"["]}var aa=1+X[0],T=X[1],Y,ab;ac=ac.substr(aa);var V=ac.match(/^\s*\([ \t]*(\S+)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(V){var S=V[1];aa+=V[0].length;if(S&&S[0]=="<"&&S[S.length-1]==">"){S=S.substring(1,S.length-1)}if(!V[3]){var U=1;for(var W=0;W<S.length;W++){switch(S[W]){case"(":U++;break;case")":if(--U==0){aa-=S.length-W;S=S.substring(0,W)}break}}}S=this.dialect.inline.__call__.call(this,S,/\\/)[0];ab={href:S||""};if(V[3]!==undefined){ab.title=V[3]}Y=["link",ab].concat(T);return[aa,Y]}V=ac.match(/^\s*\[(.*?)\]/);if(V){aa+=V[0].length;ab={ref:(V[1]||String(T)).toLowerCase(),original:Z.substr(0,aa)};Y=["link_ref",ab].concat(T);return[aa,Y]}if(T.length==1&&typeof T[0]=="string"){ab={ref:T[0].toLowerCase(),original:Z.substr(0,aa)};Y=["link_ref",ab,T[0]];return[aa,Y]}return[1,"["]},"<":function w(T){var S;if((S=T.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))!=null){if(S[3]){return[S[0].length,["link",{href:"mailto:"+S[3]},S[3]]]}else{if(S[2]=="mailto"){return[S[0].length,["link",{href:S[1]},S[1].substr("mailto:".length)]]}else{return[S[0].length,["link",{href:S[1]},S[1]]]}}}return[1,"<"]},"`":function z(T){var S=T.match(/(`+)(([\s\S]*?)\1)/);if(S&&S[2]){return[S[1].length+S[2].length,["inlinecode",S[3]]]}else{return[1,"`"]}},"  \n":function P(S){return[3,["linebreak"]]}};function G(S,V){var U=S+"_state",W=S=="strong"?"em_state":"strong_state";function T(X){this.len_after=X;this.name="close_"+V}return function(ae,ad){if(this[U][0]==V){this[U].shift();return[ae.length,new T(ae.length-V.length)]}else{var X=this[W].slice(),ac=this[U].slice();this[U].unshift(V);var Z=this.processInline(ae.substr(V.length));var aa=Z[Z.length-1];var Y=this[U].shift();if(aa instanceof T){Z.pop();var ab=ae.length-aa.len_after;return[ab,[S].concat(Z)]}else{this[W]=X;this[U]=ac;return[V.length,V]}}}}e.dialects.Gruber.inline["**"]=G("strong","**");e.dialects.Gruber.inline.__=G("strong","__");e.dialects.Gruber.inline["*"]=G("em","*");e.dialects.Gruber.inline._=G("em","_");e.buildBlockOrder=function(U){var S=[];for(var T in U){if(T=="__order__"||T=="__call__"){continue}S.push(T)}U.__order__=S};e.buildInlinePatterns=function(W){var V=[];for(var T in W){if(T.match(/^__.*__$/)){continue}var S=T.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");V.push(T.length==1?S:"(?:"+S+")")}V=V.join("|");W.__patterns__=V;var U=W.__call__;W.__call__=function(Y,X){if(X!=undefined){return U.call(this,Y,X)}else{return U.call(this,Y,V)}}};e.DialectHelpers={};e.DialectHelpers.inline_until_char=function(W,V){var U=0,S=[];while(true){if(W[U]==V){U++;return[U,S]}if(U>=W.length){return null}var T=this.dialect.inline.__oneElement__.call(this,W.substr(U));U+=T[0];S.push.apply(S,T.slice(1))}};e.subclassDialect=function(U){function S(){}S.prototype=U.block;function T(){}T.prototype=U.inline;return{block:new S(),inline:new T()}};e.buildBlockOrder(e.dialects.Gruber.block);e.buildInlinePatterns(e.dialects.Gruber.inline);e.dialects.Maruku=e.subclassDialect(e.dialects.Gruber);e.dialects.Maruku.processMetaHash=function l(V){var W=q(V),S={};for(var T=0;T<W.length;++T){if(/^#/.test(W[T])){S.id=W[T].substring(1)}else{if(/^\./.test(W[T])){if(S["class"]){S["class"]=S["class"]+W[T].replace(/./," ")}else{S["class"]=W[T].substring(1)}}else{if(/\=/.test(W[T])){var U=W[T].split(/\=/);S[U[0]]=U[1]}}}}return S};function q(U){var W=U.split(""),V=[""],S=false;while(W.length){var T=W.shift();switch(T){case" ":if(S){V[V.length-1]+=T}else{V.push("")}break;case"'":case'"':S=!S;break;case"\\":T=W.shift();default:V[V.length-1]+=T;break}}return V}e.dialects.Maruku.block.document_meta=function j(X,U){if(X.lineNumber>1){return undefined}if(!X.match(/^(?:\w+:.*\n)*\w+:.*$/)){return undefined}if(!D(this.tree)){this.tree.splice(1,0,{})}var W=X.split(/\n/);for(p in W){var S=W[p].match(/(\w+):\s*(.*)$/),T=S[1].toLowerCase(),V=S[2];this.tree[1][T]=V}return[]};e.dialects.Maruku.block.block_meta=function F(Z,W){var V=Z.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(!V){return undefined}var U=this.dialect.processMetaHash(V[2]);var Y;if(V[1]===""){var X=this.tree[this.tree.length-1];Y=D(X);if(typeof X==="string"){return undefined}if(!Y){Y={};X.splice(1,0,Y)}for(a in U){Y[a]=U[a]}return[]}var T=Z.replace(/\n.*$/,""),S=this.processBlock(T,[]);Y=D(S[0]);if(!Y){Y={};S[0].splice(1,0,Y)}for(a in U){Y[a]=U[a]}return S};e.dialects.Maruku.block.definition_list=function O(U,X){var Z=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,Y=["dl"],W;if((T=U.match(Z))){var S=[U];while(X.length&&Z.exec(X[0])){S.push(X.shift())}for(var aa=0;aa<S.length;++aa){var T=S[aa].match(Z),V=T[1].replace(/\n$/,"").split(/\n/),ab=T[2].split(/\n:\s+/);for(W=0;W<V.length;++W){Y.push(["dt",V[W]])}for(W=0;W<ab.length;++W){Y.push(["dd"].concat(this.processInline(ab[W].replace(/(\n)\s+/,"$1"))))}}}else{return undefined}return[Y]};e.dialects.Maruku.inline["{:"]=function C(Z,X,V){if(!V.length){return[2,"{:"]}var W=V[V.length-1];if(typeof W==="string"){return[2,"{:"]}var T=Z.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!T){return[2,"{:"]}var Y=this.dialect.processMetaHash(T[1]),S=D(W);if(!S){S={};W.splice(1,0,S)}for(var U in Y){S[U]=Y[U]}return[T[0].length,""]};e.buildBlockOrder(e.dialects.Maruku.block);e.buildInlinePatterns(e.dialects.Maruku.inline);var B=Array.isArray||function(S){return Object.prototype.toString.call(S)=="[object Array]"};var c;if(Array.prototype.forEach){c=function(T,S,U){return T.forEach(S,U)}}else{c=function(T,S,V){for(var U=0;U<T.length;U++){S.call(V||T,T[U],U,T)}}}function D(S){return B(S)&&S.length>1&&typeof S[1]==="object"&&!(B(S[1]))?S[1]:undefined}L.renderJsonML=function(U,S){S=S||{};S.root=S.root||false;var T=[];if(S.root){T.push(R(U))}else{U.shift();if(U.length&&typeof U[0]==="object"&&!(U[0] instanceof Array)){U.shift()}while(U.length){T.push(R(U.shift()))}}return T.join("\n\n")};function b(S){return S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function R(X){if(typeof X==="string"){return b(X)}var S=X.shift(),U={},V=[];if(X.length&&typeof X[0]==="object"&&!(X[0] instanceof Array)){U=X.shift()}while(X.length){V.push(arguments.callee(X.shift()))}var W="";for(var T in U){W+=" "+T+'="'+b(U[T])+'"'}if(S=="img"||S=="br"||S=="hr"){return"<"+S+W+"/>"}else{return"<"+S+W+">"+V.join("")+"</"+S+">"}}function i(aa,X,Z){var U;Z=Z||{};var W=aa.slice(0);if(typeof Z.preprocessTreeNode==="function"){W=Z.preprocessTreeNode(W,X)}var Y=D(W);if(Y){W[1]={};for(U in Y){W[1][U]=Y[U]}Y=W[1]}if(typeof W==="string"){return W}switch(W[0]){case"header":W[0]="h"+W[1].level;delete W[1].level;break;case"bulletlist":W[0]="ul";break;case"numberlist":W[0]="ol";break;case"listitem":W[0]="li";break;case"para":W[0]="p";break;case"markdown":W[0]="html";if(Y){delete Y.references}break;case"code_block":W[0]="pre";U=Y?2:1;var S=["code"];S.push.apply(S,W.splice(U));W[U]=S;break;case"inlinecode":W[0]="code";break;case"img":W[1].src=W[1].href;delete W[1].href;break;case"linebreak":W[0]="br";break;case"link":W[0]="a";break;case"link_ref":W[0]="a";var T=X[Y.ref];if(T){delete Y.ref;Y.href=T.href;if(T.title){Y.title=T.title}delete Y.original}else{return Y.original}break;case"img_ref":W[0]="img";var T=X[Y.ref];if(T){delete Y.ref;Y.src=T.href;if(T.title){Y.title=T.title}delete Y.original}else{return Y.original}break}U=1;if(Y){for(var V in W[1]){U=2}if(U===1){W.splice(U,1)}}for(;U<W.length;++U){W[U]=arguments.callee(W[U],X,Z)}return W}function r(T){var S=D(T)?2:1;while(S<T.length){if(typeof T[S]==="string"){if(S+1<T.length&&typeof T[S+1]==="string"){T[S]+=T.splice(S+1,1)[0]}else{++S}}else{arguments.callee(T[S]);++S}}}})((function(){if(typeof exports==="undefined"){window.markdown={};return window.markdown}else{return exports}})());shortcut={all_shortcuts:{},add:function(c,i,e){var h={type:"keydown",propagate:false,disable_in_input:false,target:document,keycode:false};if(!e){e=h}else{for(var b in h){if(typeof e[b]=="undefined"){e[b]=h[b]}}}var g=e.target;if(typeof e.target=="string"){g=document.getElementById(e.target)}var d=this;c=c.toLowerCase();var f=function(o){o=o||window.event;if(e.disable_in_input){var l;if(o.target){l=o.target}else{if(o.srcElement){l=o.srcElement}}if(l.nodeType==3){l=l.parentNode}if(l.tagName=="INPUT"||l.tagName=="TEXTAREA"){return}}if(o.keyCode){code=o.keyCode}else{if(o.which){code=o.which}}var n=String.fromCharCode(code).toLowerCase();if(code==188){n=","}if(code==190){n="."}var t=c.split("+");var s=0;var q={"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"};var m={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123};var r={shift:{wanted:false,pressed:false},ctrl:{wanted:false,pressed:false},alt:{wanted:false,pressed:false},meta:{wanted:false,pressed:false}};if(o.ctrlKey){r.ctrl.pressed=true}if(o.shiftKey){r.shift.pressed=true}if(o.altKey){r.alt.pressed=true}if(o.metaKey){r.meta.pressed=true}for(var j=0;k=t[j],j<t.length;j++){if(k=="ctrl"||k=="control"){s++;r.ctrl.wanted=true}else{if(k=="shift"){s++;r.shift.wanted=true}else{if(k=="alt"){s++;r.alt.wanted=true}else{if(k=="meta"){s++;r.meta.wanted=true}else{if(k.length>1){if(m[k]==code){s++}}else{if(e.keycode){if(e.keycode==code){s++}}else{if(n==k){s++}else{if(q[n]&&o.shiftKey){n=q[n];if(n==k){s++}}}}}}}}}}if(s==t.length&&r.ctrl.pressed==r.ctrl.wanted&&r.shift.pressed==r.shift.wanted&&r.alt.pressed==r.alt.wanted&&r.meta.pressed==r.meta.wanted){i(o);if(!e.propagate){o.cancelBubble=true;o.returnValue=false;if(o.stopPropagation){o.stopPropagation();o.preventDefault()}return false}}};this.all_shortcuts[c]={callback:f,target:g,event:e.type};if(g.addEventListener){g.addEventListener(e.type,f,false)}else{if(g.attachEvent){g.attachEvent("on"+e.type,f)}else{g["on"+e.type]=f}}},remove:function(b){b=b.toLowerCase();var e=this.all_shortcuts[b];delete (this.all_shortcuts[b]);if(!e){return}var c=e.event;var d=e.target;var f=e.callback;if(d.detachEvent){d.detachEvent("on"+c,f)}else{if(d.removeEventListener){d.removeEventListener(c,f,false)}else{d["on"+c]=false}}}}(function(){function ai(c,b){if(!b||typeof b=="function"){return c}for(var d in b){c[d]=b[d]}return c}function ad(g,c,l){var f,b=0,d=g.length,h=d===undefined||typeof g=="function";if(l){if(h){for(f in g){if(c.apply(g[f],l)===!1){break}}}else{for(;b<d;){if(c.apply(g[b++],l)===!1){break}}}}else{if(h){for(f in g){if(c.call(g[f],f,g[f])===!1){break}}}else{for(;b<d;){if(c.call(g[b],b,g[b++])===!1){break}}}}return g}function Z(g){var m=function(n){if(window.XMLHttpRequest){return n(null,new XMLHttpRequest)}if(window.ActiveXObject){try{return n(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(i){return n(null,new ActiveXObject("Microsoft.XMLHTTP"))}}return n(new Error)},d=function(o){if(typeof o=="string"){return o}var i=[];for(var r in o){o.hasOwnProperty(r)&&i.push(encodeURIComponent(r)+"="+encodeURIComponent(o[r]))}return i.join("&")},b=function(s){s=s.replace(/\r\n/g,"\n");var i="";for(var u=0;u<s.length;u++){var o=s.charCodeAt(u);o<128?i+=String.fromCharCode(o):o>127&&o<2048?(i+=String.fromCharCode(o>>6|192),i+=String.fromCharCode(o&63|128)):(i+=String.fromCharCode(o>>12|224),i+=String.fromCharCode(o>>6&63|128),i+=String.fromCharCode(o&63|128))}return i},f=function(C){var O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";C=b(C);var w="",y,S,r,N,L,A,x,E=0;do{y=C.charCodeAt(E++),S=C.charCodeAt(E++),r=C.charCodeAt(E++),N=y>>2,L=(y&3)<<4|S>>4,A=(S&15)<<2|r>>6,x=r&63,isNaN(S)?A=x=64:isNaN(r)&&(x=64),w+=O.charAt(N)+O.charAt(L)+O.charAt(A)+O.charAt(x),y=S=r="",N=L=A=x=""}while(E<C.length);return w},v=function(){var s=arguments[0];for(var i=1;i<arguments.length;i++){var u=arguments[i];for(var o in u){u.hasOwnProperty(o)&&(s[o]=u[o])}}return s},c=function(x,n,s,C){typeof s=="function"&&(C=s,s={}),s.cache=s.cache||!1,s.data=s.data||{},s.headers=s.headers||{},s.jsonp=s.jsonp||!1,s.async=s.async===undefined?!0:s.async;var A=v({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},c.headers,s.headers),w;A["content-type"]==="application/json"?w=JSON.stringify(s.data):w=d(s.data);if(x==="GET"){var o=[];w&&(o.push(w),w=null),s.cache||o.push("_="+(new Date).getTime()),s.jsonp&&(o.push("callback="+s.jsonp),o.push("jsonp="+s.jsonp)),o="?"+o.join("&"),n+=o!=="?"?o:"";if(s.jsonp){var y=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src=n,y.appendChild(t);return}}m(function(e,r){if(e){return C(e)}r.open(x,n,s.async);for(var i in A){A.hasOwnProperty(i)&&r.setRequestHeader(i,A[i])}r.onreadystatechange=function(){if(r.readyState===4){var u=r.responseText||"";if(!C){return}C(r.status,{text:function(){return u},json:function(){return JSON.parse(u)}})}},r.send(w)})},l={authBasic:function(n,i){c.headers.Authorization="Basic "+f(n+":"+i)},connect:function(o,i,r){return c("CONNECT",o,i,r)},del:function(o,i,r){return c("DELETE",o,i,r)},get:function(o,i,r){return c("GET",o,i,r)},head:function(o,i,r){return c("HEAD",o,i,r)},headers:function(i){c.headers=i||{}},isAllowed:function(o,i,r){this.options(o,function(s,n){r(n.text().indexOf(i)!==-1)})},options:function(o,i,r){return c("OPTIONS",o,i,r)},patch:function(o,i,r){return c("PATCH",o,i,r)},post:function(o,i,r){return c("POST",o,i,r)},put:function(o,i,r){return c("PUT",o,i,r)},trace:function(o,i,r){return c("TRACE",o,i,r)}},h=g.sendType?g.sendType.toLowerCase():"get";l[h](g.url,{async:g.async},function(e,i){e===200?g.success(i.json(),e,null):g.error(i.text(),e,null)})}function ab(m,t){typeof m=="function"&&(t=m,m={}),m=m||{},ag.extend(J,m),typeof J.ns=="string"&&(J.ns={namespaces:[J.ns],defaultNs:J.ns}),J.lng||(J.lng=ag.detectLanguage()),J.lng?ag.cookie.create("i18next",J.lng,J.cookieExpirationTime):(J.lng=J.fallbackLng,ag.cookie.remove("i18next")),W=ag.toLanguages(J.lng),aa=W[0],ag.log("currentLng set to: "+aa),B.setCurrentLng(aa),M&&J.setJqueryExt&&Y();var o;M&&M.Deferred&&(o=M.Deferred());if(J.resStore){return R=J.resStore,t&&t(K),o&&o.resolve(),o}var i=ag.toLanguages(J.lng);typeof J.preload=="string"&&(J.preload=[J.preload]);for(var c=0,g=J.preload.length;c<g;c++){var b=ag.toLanguages(J.preload[c]);for(var n=0,r=b.length;n<r;n++){i.indexOf(b[n])<0&&i.push(b[n])}}return X.sync.load(i,J,function(f,d){R=d,t&&t(K),o&&o.resolve()}),o}function V(d,b){typeof d=="string"&&(d=[d]);for(var f=0,c=d.length;f<c;f++){J.preload.indexOf(d[f])<0&&J.preload.push(d[f])}return ab(b)}function af(c,b){return ab({lng:c},b)}function I(){return aa}function Y(){function b(h,m,g){if(m.length===0){return}var d="text";if(m.indexOf("[")===0){var f=m.split("]");m=f[1],d=f[0].substr(1,f[0].length-1)}m.indexOf(";")===m.length-1&&(m=m.substr(0,m.length-2));var l;d==="html"?(l=M.extend({defaultValue:h.html()},g),h.html(M.t(m,l))):d==="text"?(l=M.extend({defaultValue:h.text()},g),h.text(M.t(m,l))):(l=M.extend({defaultValue:h.attr(d)},g),h.attr(d,M.t(m,l)))}function c(g,f){var d=g.attr("data-i18n");if(!d){return}!f&&J.useDataAttrOptions===!0&&(f=g.data("i18n-options")),f=f||{};if(d.indexOf(";")<=d.length-1){var e=d.split(";");M.each(e,function(l,h){b(g,h,f)})}else{b(g,k,f)}J.useDataAttrOptions===!0&&g.data("i18n-options",f)}M.t=M.t||K,M.fn.i18n=function(d){return this.each(function(){c(M(this),d);var e=M(this).find("[data-i18n]");e.each(function(){c(M(this),d)})})}}function ac(c,b,d){return c.indexOf(J.interpolationPrefix)<0?c:(ag.each(b,function(e,f){typeof f=="object"?c=ac(c,f,e):c=c.replace(new RegExp([J.interpolationPrefix,d?d+"."+e:e,J.interpolationSuffix].join(""),"g"),f)}),c)}function F(l,d){var s=ag.extend({},d);delete s.postProcess;while(l.indexOf(J.reusePrefix)!=-1){P++;if(P>J.maxRecursion){break}var g=l.indexOf(J.reusePrefix),c=l.indexOf(J.reuseSuffix,g)+J.reuseSuffix.length,m=l.substring(g,c),b=m.replace(J.reusePrefix,"").replace(J.reuseSuffix,""),h=q(b,s);l=l.replace(m,h)}return l}function ah(b){return b.context&&typeof b.context=="string"}function H(b){return b.count!==undefined&&typeof b.count!="string"&&b.count!==1}function K(c,b){return P=0,q(c,b)}function q(al,u){u=u||{};var y,an,ak=u.defaultValue||al,S=W;if(u.lng){S=ag.toLanguages(u.lng);if(!R[S[0]]){var aj=J.getAsync;J.getAsync=!1,X.sync.load(S,J,function(f,d){ag.extend(R,d),J.getAsync=aj})}}if(!R){return ak}var E=J.ns.defaultNs;if(al.indexOf(J.nsseparator)>-1){var am=al.split(J.nsseparator);E=am[0],al=am[1]}if(ah(u)){y=ag.extend({},u),delete y.context,y.defaultValue=J.contextNotFound;var r=E+":"+al+"_"+u.context;an=K(r,y);if(an!=J.contextNotFound){return ac(an,{context:u.context})}}if(H(u)){y=ag.extend({},u),delete y.count,y.defaultValue=J.pluralNotFound;var N=E+":"+al+J.pluralSuffix,n=B.get(aa,u.count);n>=0?N=N+"_"+n:n===1&&(N=E+":"+al),an=K(N,y);if(an!=J.pluralNotFound){return ac(an,{count:u.count})}}var T,i=al.split(J.keyseparator);for(var C=0,c=S.length;C<c;C++){if(T){break}var g=S[C],ao=0,w=R[g]&&R[g][E];while(i[ao]){w=w&&w[i[ao]],ao++}if(w){if(typeof w=="string"){w=ac(w,u),w=F(w,u)}else{if(Object.prototype.toString.apply(w)==="[object Array]"&&!J.returnObjectTrees&&!u.returnObjectTrees){w=w.join("\n"),w=ac(w,u),w=F(w,u)}else{if(!J.returnObjectTrees&&!u.returnObjectTrees){w="key '"+E+":"+al+" ("+g+")' returned a object instead of string.",ag.log(w)}else{for(var b in w){w[b]=q(al+"."+b,u)}}}}T=w}}!T&&J.sendMissing&&(u.lng?j.postMissing(u.lng,E,al,ak,S):j.postMissing(J.lng,E,al,ak,S));var o=u.postProcess||J.postProcess;return T&&o&&Q[o]&&(T=Q[o](T,al,u)),T||(ak=ac(ak,u),ak=F(ak,u)),T?T:ak}function G(){var c,b=[];window&&(function(){var l=window.location.search.substring(1),t=l.split("&");for(var h=0;h<t.length;h++){var f=t[h].indexOf("=");if(f>0){var g=t[h].substring(0,f),m=t[h].substring(f+1);b[g]=m}}}(),b.setLng&&(c=b.setLng));if(!c&&document){var d=ag.cookie.read("i18next");d&&(c=d)}return !c&&navigator&&(c=navigator.language?navigator.language:navigator.userLanguage),c}Array.prototype.indexOf||(Array.prototype.indexOf=function(f){if(this==null){throw new TypeError}var c=Object(this),g=c.length>>>0;if(g===0){return -1}var d=0;arguments.length>0&&(d=Number(arguments[1]),d!=d?d=0:d!=0&&d!=Infinity&&d!=-Infinity&&(d=(d>0||-1)*Math.floor(Math.abs(d))));if(d>=g){return -1}var b=d>=0?d:Math.max(g-Math.abs(d),0);for(;b<g;b++){if(b in c&&c[b]===f){return b}}return -1});var ae=this,M=ae.jQuery,X={},R={},aa,P=0,W=[];typeof module!="undefined"&&module.exports?module.exports=X:typeof define=="function"&&define.amd?define(X):M?M.i18n=M.i18n||X:ae.i18n=ae.i18n||X;var J={lng:undefined,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:"dev",ns:"translation",nsseparator:":",keyseparator:".",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:undefined,useLocalStorage:!1,localStorageExpirationTime:604800000,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),setJqueryExt:!0,useDataAttrOptions:!1,cookieExpirationTime:undefined,postProcess:undefined},ag={extend:M?M.extend:ai,each:M?M.each:ad,ajax:M?M.ajax:Z,detectLanguage:G,log:function(b){J.debug&&console.log(b)},cookie:{create:function(f,c,g){var d;if(g){var b=new Date;b.setTime(b.getTime()+g*60*1000),d="; expires="+b.toGMTString()}else{d=""}document.cookie=f+"="+c+d+"; path=/"},read:function(f){var c=f+"=",g=document.cookie.split(";");for(var d=0;d<g.length;d++){var b=g[d];while(b.charAt(0)==" "){b=b.substring(1,b.length)}if(b.indexOf(c)===0){return b.substring(c.length,b.length)}}return null},remove:function(b){this.create(b,"",-1)}},toLanguages:function(c){var b=[];if(c.indexOf("-")===2&&c.length===5){var d=c.split("-");c=J.lowerCaseLng?d[0].toLowerCase()+"-"+d[1].toLowerCase():d[0].toLowerCase()+"-"+d[1].toUpperCase(),J.load!=="unspecific"&&b.push(c),J.load!=="current"&&b.push(c.substr(0,2))}else{b.push(c)}return b.indexOf(J.fallbackLng)===-1&&J.fallbackLng&&b.push(J.fallbackLng),b}},j={load:function(c,b,d){b.useLocalStorage?j._loadLocal(c,b,function(h,f){var g=[];for(var l=0,e=c.length;l<e;l++){f[c[l]]||g.push(c[l])}g.length>0?j._fetch(g,b,function(m,i){ag.extend(f,i),j._storeLocal(i),d(null,f)}):d(null,f)}):j._fetch(c,b,function(g,f){d(null,f)})},_loadLocal:function(g,c,h){var f={},b=(new Date).getTime();if(window.localStorage){var d=g.length;ag.each(g,function(l,m){var i=window.localStorage.getItem("res_"+m);i&&(i=JSON.parse(i),i.i18nStamp&&i.i18nStamp+c.localStorageExpirationTime>b&&(f[m]=i)),d--,d===0&&h(null,f)})}},_storeLocal:function(c){if(window.localStorage){for(var b in c){c[b].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+b,JSON.stringify(c[b]))}}return},_fetch:function(h,d,m){var g=d.ns,c={};if(!d.dynamicLoad){var f=g.namespaces.length*h.length,l;ag.each(g.namespaces,function(i,e){ag.each(h,function(o,n){j._fetchOne(n,e,d,function(s,r){s&&(l=l||[],l.push(s)),c[n]=c[n]||{},c[n][e]=r,f--,f===0&&m(l,c)})})})}else{var b=ac(d.resGetPath,{lng:h.join("+"),ns:g.namespaces.join("+")});ag.ajax({url:b,success:function(o,i,n){ag.log("loaded: "+b),m(null,o)},error:function(o,i,n){ag.log("failed loading: "+b),m("failed loading resource.json error: "+n)},dataType:"json",async:d.getAsync})}},_fetchOne:function(f,c,g,d){var b=ac(g.resGetPath,{lng:f,ns:c});ag.ajax({url:b,success:function(i,h,l){ag.log("loaded: "+b),d(null,i)},error:function(i,h,l){ag.log("failed loading: "+b),d(l,{})},dataType:"json",async:g.getAsync})},postMissing:function(w,A,g,r,C){var c={};c[g]=r;var y=[];if(J.sendMissingTo==="fallback"){y.push({lng:J.fallbackLng,url:ac(J.resPostPath,{lng:J.fallbackLng,ns:A})})}else{if(J.sendMissingTo==="current"){y.push({lng:w,url:ac(J.resPostPath,{lng:w,ns:A})})}else{if(J.sendMissingTo==="all"){for(var v=0,m=C.length;v<m;v++){y.push({lng:C[v],url:ac(J.resPostPath,{lng:C[v],ns:A})})}}}}for(var u=0,b=y.length;u<b;u++){var x=y[u];ag.ajax({url:x.url,type:J.sendType,data:c,success:function(f,d,h){ag.log("posted missing key '"+g+"' to: "+x.url),R[x.lng][A][g]=r},error:function(h,d,f){ag.log("failed posting missing key '"+g+"' to: "+x.url)},dataType:"json",async:J.postAsync})}}},B={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(b){return Number(b>1)}},af:{name:"Afrikaans",numbers:[2,1],plurals:function(b){return Number(b!=1)}},ak:{name:"Akan",numbers:[1,2],plurals:function(b){return Number(b>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(b){return Number(b>1)}},an:{name:"Aragonese",numbers:[2,1],plurals:function(b){return Number(b!=1)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(b){return Number(b===0?0:b==1?1:b==2?2:b%100>=3&&b%100<=10?3:b%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(b){return Number(b>1)}},ast:{name:"Asturian",numbers:[2,1],plurals:function(b){return Number(b!=1)}},ay:{name:"Aymar",numbers:[1],plurals:function(b){return 0}},az:{name:"Azerbaijani",numbers:[2,1],plurals:function(b){return Number(b!=1)}},be:{name:"Belarusian",numbers:[5,1,2],plurals:function(b){return Number(b%10==1&&b%100!=11?0:b%10>=2&&b%10<=4&&(b%100<10||b%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[2,1],plurals:function(b){return Number(b!=1)}},bn:{name:"Bengali",numbers:[2,1],plurals:function(b){return Number(b!=1)}},bo:{name:"Tibetan",numbers:[1],plurals:function(b){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(b){return Number(b>1)}},bs:{name:"Bosnian",numbers:[5,1,2],plurals:function(b){return Number(b%10==1&&b%100!=11?0:b%10>=2&&b%10<=4&&(b%100<10||b%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[2,1],plurals:function(b){return Number(b!=1)}},cgg:{name:"Chiga",numbers:[1],plurals:function(b){return 0}},cs:{name:"Czech",numbers:[5,1,2],plurals:function(b){return Number(b==1?0:b>=2&&b<=4?1:2)}},csb:{name:"Kashubian",numbers:[5,1,2],plurals:function(b){return Number(b==1?0:b%10>=2&&b%10<=4&&(b%100<10||b%100>=20)?1:2)}},cy:{name:"Welsh",numbers:[3,1,2,8],plurals:function(b){return Number(b==1?0:b==2?1:b!=8&&b!=11?2:3)}},da:{name:"Danish",numbers:[2,1],plurals:function(b){return Number(b!=1)}},de:{name:"German",numbers:[2,1],plurals:function(b){return Number(b!=1)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(b){return 0}},el:{name:"Greek",numbers:[2,1],plurals:function(b){return Number(b!=1)}},en:{name:"English",numbers:[2,1],plurals:function(b){return Number(b!=1)}},eo:{name:"Esperanto",numbers:[2,1],plurals:function(b){return Number(b!=1)}},es:{name:"Spanish",numbers:[2,1],plurals:function(b){return Number(b!=1)}},es_ar:{name:"Argentinean Spanish",numbers:[2,1],plurals:function(b){return Number(b!=1)}},et:{name:"Estonian",numbers:[2,1],plurals:function(b){return Number(b!=1)}},eu:{name:"Basque",numbers:[2,1],plurals:function(b){return Number(b!=1)}},fa:{name:"Persian",numbers:[1],plurals:function(b){return 0}},fi:{name:"Finnish",numbers:[2,1],plurals:function(b){return Number(b!=1)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(b){return Number(b>1)}},fo:{name:"Faroese",numbers:[2,1],plurals:function(b){return Number(b!=1)}},fr:{name:"French",numbers:[1,2],plurals:function(b){return Number(b>1)}},fur:{name:"Friulian",numbers:[2,1],plurals:function(b){return Number(b!=1)}},fy:{name:"Frisian",numbers:[2,1],plurals:function(b){return Number(b!=1)}},ga:{name:"Irish",numbers:[3,1,2,7,11],plurals:function(b){return Number(b==1?0:b==2?1:b<7?2:b<11?3:4)}},gd:{name:"Scottish Gaelic",numbers:[20,1,2,3],plurals:function(b){return Number(b==1||b==11?0:b==2||b==12?1:b>2&&b<20?2:3)}},gl:{name:"Galician",numbers:[2,1],plurals:function(b){return Number(b!=1)}},gu:{name:"Gujarati",numbers:[2,1],plurals:function(b){return Number(b!=1)}},gun:{name:"Gun",numbers:[1,2],plurals:function(b){return Number(b>1)}},ha:{name:"Hausa",numbers:[2,1],plurals:function(b){return Number(b!=1)}},he:{name:"Hebrew",numbers:[2,1],plurals:function(b){return Number(b!=1)}},hi:{name:"Hindi",numbers:[2,1],plurals:function(b){return Number(b!=1)}},hr:{name:"Croatian",numbers:[5,1,2],plurals:function(b){return Number(b%10==1&&b%100!=11?0:b%10>=2&&b%10<=4&&(b%100<10||b%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[2,1],plurals:function(b){return Number(b!=1)}},hy:{name:"Armenian",numbers:[2,1],plurals:function(b){return Number(b!=1)}},ia:{name:"Interlingua",numbers:[2,1],plurals:function(b){return Number(b!=1)}},id:{name:"Indonesian",numbers:[1],plurals:function(b){return 0}},is:{name:"Icelandic",numbers:[2,1],plurals:function(b){return Number(b%10!=1||b%100==11)}},it:{name:"Italian",numbers:[2,1],plurals:function(b){return Number(b!=1)}},ja:{name:"Japanese",numbers:[1],plurals:function(b){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(b){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(b){return Number(b!==0)}},ka:{name:"Georgian",numbers:[1],plurals:function(b){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(b){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(b){return 0}},kn:{name:"Kannada",numbers:[2,1],plurals:function(b){return Number(b!=1)}},ko:{name:"Korean",numbers:[1],plurals:function(b){return 0}},ku:{name:"Kurdish",numbers:[2,1],plurals:function(b){return Number(b!=1)}},kw:{name:"Cornish",numbers:[4,1,2,3],plurals:function(b){return Number(b==1?0:b==2?1:b==3?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(b){return 0}},lb:{name:"Letzeburgesch",numbers:[2,1],plurals:function(b){return Number(b!=1)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(b){return Number(b>1)}},lo:{name:"Lao",numbers:[1],plurals:function(b){return 0}},lt:{name:"Lithuanian",numbers:[10,1,2],plurals:function(b){return Number(b%10==1&&b%100!=11?0:b%10>=2&&(b%100<10||b%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[0,1,2],plurals:function(b){return Number(b%10==1&&b%100!=11?0:b!==0?1:2)}},mai:{name:"Maithili",numbers:[2,1],plurals:function(b){return Number(b!=1)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(b){return Number(b>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(b){return Number(b>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(b){return Number(b>1)}},mk:{name:"Macedonian",numbers:[2,1],plurals:function(b){return Number(b==1||b%10==1?0:1)}},ml:{name:"Malayalam",numbers:[2,1],plurals:function(b){return Number(b!=1)}},mn:{name:"Mongolian",numbers:[2,1],plurals:function(b){return Number(b!=1)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(b){return Number(b==1?1:2)}},mr:{name:"Marathi",numbers:[2,1],plurals:function(b){return Number(b!=1)}},ms:{name:"Malay",numbers:[1],plurals:function(b){return 0}},mt:{name:"Maltese",numbers:[2,1,11,20],plurals:function(b){return Number(b==1?0:b===0||b%100>1&&b%100<11?1:b%100>10&&b%100<20?2:3)}},nah:{name:"Nahuatl",numbers:[2,1],plurals:function(b){return Number(b!=1)}},nap:{name:"Neapolitan",numbers:[2,1],plurals:function(b){return Number(b!=1)}},nb:{name:"Norwegian Bokmal",numbers:[2,1],plurals:function(b){return Number(b!=1)}},ne:{name:"Nepali",numbers:[2,1],plurals:function(b){return Number(b!=1)}},nl:{name:"Dutch",numbers:[2,1],plurals:function(b){return Number(b!=1)}},nn:{name:"Norwegian Nynorsk",numbers:[2,1],plurals:function(b){return Number(b!=1)}},no:{name:"Norwegian",numbers:[2,1],plurals:function(b){return Number(b!=1)}},nso:{name:"Northern Sotho",numbers:[2,1],plurals:function(b){return Number(b!=1)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(b){return Number(b>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(b){return Number(b!=1)}},pa:{name:"Punjabi",numbers:[2,1],plurals:function(b){return Number(b!=1)}},pap:{name:"Papiamento",numbers:[2,1],plurals:function(b){return Number(b!=1)}},pl:{name:"Polish",numbers:[5,1,2],plurals:function(b){return Number(b==1?0:b%10>=2&&b%10<=4&&(b%100<10||b%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[2,1],plurals:function(b){return Number(b!=1)}},ps:{name:"Pashto",numbers:[2,1],plurals:function(b){return Number(b!=1)}},pt:{name:"Portuguese",numbers:[2,1],plurals:function(b){return Number(b!=1)}},pt_br:{name:"Brazilian Portuguese",numbers:[2,1],plurals:function(b){return Number(b!=1)}},rm:{name:"Romansh",numbers:[2,1],plurals:function(b){return Number(b!=1)}},ro:{name:"Romanian",numbers:[2,1,20],plurals:function(b){return Number(b==1?0:b===0||b%100>0&&b%100<20?1:2)}},ru:{name:"Russian",numbers:[5,1,2],plurals:function(b){return Number(b%10==1&&b%100!=11?0:b%10>=2&&b%10<=4&&(b%100<10||b%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(b){return 0}},sco:{name:"Scots",numbers:[2,1],plurals:function(b){return Number(b!=1)}},se:{name:"Northern Sami",numbers:[2,1],plurals:function(b){return Number(b!=1)}},si:{name:"Sinhala",numbers:[2,1],plurals:function(b){return Number(b!=1)}},sk:{name:"Slovak",numbers:[5,1,2],plurals:function(b){return Number(b==1?0:b>=2&&b<=4?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(b){return Number(b%100==1?1:b%100==2?2:b%100==3||b%100==4?3:0)}},so:{name:"Somali",numbers:[2,1],plurals:function(b){return Number(b!=1)}},son:{name:"Songhay",numbers:[2,1],plurals:function(b){return Number(b!=1)}},sq:{name:"Albanian",numbers:[2,1],plurals:function(b){return Number(b!=1)}},sr:{name:"Serbian",numbers:[5,1,2],plurals:function(b){return Number(b%10==1&&b%100!=11?0:b%10>=2&&b%10<=4&&(b%100<10||b%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(b){return 0}},sv:{name:"Swedish",numbers:[2,1],plurals:function(b){return Number(b!=1)}},sw:{name:"Swahili",numbers:[2,1],plurals:function(b){return Number(b!=1)}},ta:{name:"Tamil",numbers:[2,1],plurals:function(b){return Number(b!=1)}},te:{name:"Telugu",numbers:[2,1],plurals:function(b){return Number(b!=1)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(b){return Number(b>1)}},th:{name:"Thai",numbers:[1],plurals:function(b){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(b){return Number(b>1)}},tk:{name:"Turkmen",numbers:[2,1],plurals:function(b){return Number(b!=1)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(b){return Number(b>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(b){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(b){return 0}},uk:{name:"Ukrainian",numbers:[5,1,2],plurals:function(b){return Number(b%10==1&&b%100!=11?0:b%10>=2&&b%10<=4&&(b%100<10||b%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[2,1],plurals:function(b){return Number(b!=1)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(b){return Number(b>1)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(b){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(b){return Number(b>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(b){return 0}},yo:{name:"Yoruba",numbers:[2,1],plurals:function(b){return Number(b!=1)}},zh:{name:"Chinese",numbers:[1],plurals:function(b){return 0}}},addRule:function(c,b){B.rules[c]=b},setCurrentLng:function(c){if(!B.currentRule||B.currentRule.lng!==c){var b=c.split("-");B.currentRule={lng:c,rule:B.rules[b[0]]}}},get:function(d,b){function c(g,m){var l;B.currentRule&&B.currentRule.lng===d?l=B.currentRule.rule:l=B.rules[g];if(l){var e=l.plurals(m),h=l.numbers[e];return l.numbers.length===2&&(h===2?h=1:h===1&&(h=-1)),h}return m===1?"1":"-1"}var f=d.split("-");return c(f[0],b)}},Q={},D=function(c,b){Q[c]=b},U=function(){function c(f){return Object.prototype.toString.call(f).slice(8,-1).toLowerCase()}function b(g,f){for(var h=[];f>0;h[--f]=g){}return h.join("")}var d=function(){return d.cache.hasOwnProperty(arguments[0])||(d.cache[arguments[0]]=d.parse(arguments[0])),d.format.call(null,d.cache[arguments[0]],arguments)};return d.format=function(t,e){var w=1,N=t.length,m="",L,E=[],y,v,C,x,g,A;for(y=0;y<N;y++){m=c(t[y]);if(m==="string"){E.push(t[y])}else{if(m==="array"){C=t[y];if(C[2]){L=e[w];for(v=0;v<C[2].length;v++){if(!L.hasOwnProperty(C[2][v])){throw U('[sprintf] property "%s" does not exist',C[2][v])}L=L[C[2][v]]}}else{C[1]?L=e[C[1]]:L=e[w++]}if(/[^s]/.test(C[8])&&c(L)!="number"){throw U("[sprintf] expecting number but found %s",c(L))}switch(C[8]){case"b":L=L.toString(2);break;case"c":L=String.fromCharCode(L);break;case"d":L=parseInt(L,10);break;case"e":L=C[7]?L.toExponential(C[7]):L.toExponential();break;case"f":L=C[7]?parseFloat(L).toFixed(C[7]):parseFloat(L);break;case"o":L=L.toString(8);break;case"s":L=(L=String(L))&&C[7]?L.substring(0,C[7]):L;break;case"u":L=Math.abs(L);break;case"x":L=L.toString(16);break;case"X":L=L.toString(16).toUpperCase()}L=/[def]/.test(C[8])&&C[3]&&L>=0?"+"+L:L,g=C[4]?C[4]=="0"?"0":C[4].charAt(1):" ",A=C[6]-String(L).length,x=C[6]?b(g,A):"",E.push(C[5]?L+x:x+L)}}}return E.join("")},d.cache={},d.parse=function(v){var h=v,x=[],m=[],g=0;while(h){if((x=/^[^\x25]+/.exec(h))!==null){m.push(x[0])}else{if((x=/^\x25{2}/.exec(h))!==null){m.push("%")}else{if((x=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(h))===null){throw"[sprintf] huh?"}if(x[2]){g|=1;var l=[],w=x[2],f=[];if((f=/^([a-z_][a-z_\d]*)/i.exec(w))===null){throw"[sprintf] huh?"}l.push(f[1]);while((w=w.substring(f[0].length))!==""){if((f=/^\.([a-z_][a-z_\d]*)/i.exec(w))!==null){l.push(f[1])}else{if((f=/^\[(\d+)\]/.exec(w))===null){throw"[sprintf] huh?"}l.push(f[1])}}x[2]=l}else{g|=2}if(g===3){throw"[sprintf] mixing positional and named placeholders is not (yet) supported"}m.push(x)}}h=h.substring(x[0].length)}return m},d}(),z=function(c,b){return b.unshift(c),U.apply(null,b)};D("sprintf",function(c,b,d){return d.sprintf?Object.prototype.toString.apply(d.sprintf)==="[object Array]"?z(c,d.sprintf):typeof d.sprintf=="object"?U(c,d.sprintf):c:c}),X.init=ab,X.setLng=af,X.preload=V,X.t=K,X.translate=K,X.detectLanguage=ag.detectLanguage,X.pluralExtensions=B,X.sync=j,X.functions=ag,X.lng=I,X.addPostProcessor=D,X.options=J})();