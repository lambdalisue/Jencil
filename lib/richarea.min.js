/*
Richarea

Cross browser richarea (iframe) munipulator script written in CoffeeScript

:Author: Alisue (lambdalisue@hashnote.net)
:License: MIT License
:Url: http://github.com/lambdalisue/Richarea
:Version: 0.1.1rc3
:Reference:
  - http://help.dottoro.com/ljcvtcaw.php
  - http://wiki.bit-hive.com/tomizoo/pg/JavaScript%20Range%A4%CE%BB%C8%A4%A4%CA%FD
  - http://www.mozilla-japan.org/editor/midas-spec.html
  - https://bugzilla.mozilla.org/show_bug.cgi?id=297494
*/
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(5(){p Z,G,J,x;p 14=5(3v,3u){4 5(){4 3v.4K(3u,3b)}},30=4J.7.2s||5(3t){15(p i=0,l=3.N;i<l;i++){6(3[i]===3t)4 i}4-1};Z=(5(){5 Z(){3.x=3.2v(3.3r)||"2x 2w x";3.3e=3.2t(z.10)||3.2t(z.4I)||"2x 2w x";3.3s=3.2v(3.3l)||"2x 2w 3s"}Z.7.2v=5(2u){p T,s,M,C;C=[];15(s=0,M=2u.N;s<M;s++){T=2u[s];3.2q=T.1e||T.v;6(T.A!=a){6(T.A.2s(T.B)!==-1){4 T.v}e 6(T.3q){4 T.v}}}4 C};Z.7.2t=5(2r){p 1R;1R=2r.2s(3.2q);6(1R===-1){4}4 4H(2r.1M(1R+3.2q.N+1))};Z.7.3r=[{A:z.10,B:\'1I\',v:\'1I\'},{A:z.10,B:\'2p\',1e:\'2p/\',v:\'2p\'},{A:z.1Q,B:\'4G\',v:\'4F\',1e:\'3p\'},{3q:I.4E,v:\'4D\',1e:\'3p\'},{A:z.1Q,B:\'3o\',v:\'3o\'},{A:z.1Q,B:\'4C\',v:\'4B\'},{A:z.10,B:\'1w\',v:\'1w\'},{A:z.1Q,B:\'3n\',v:\'3n\'},{A:z.10,B:\'2o\',v:\'2o\'},{A:z.10,B:\'3m\',v:\'3f\',1e:\'3m\'},{A:z.10,B:\'4A\',v:\'2n\',1e:\'4z\'},{A:z.10,B:\'2n\',v:\'2o\',1e:\'2n\'}];Z.7.3l=[{A:z.2m,B:\'4y\',v:\'4x\'},{A:z.2m,B:\'3k\',v:\'3k\'},{A:z.10,B:\'3j\',v:\'3j/4w\'},{A:z.2m,B:\'3i\',v:\'3i\'}];4 Z})();x=27 Z;J=(5(){5 J(o){3.o=o;3.1v=V;3.1j=[];6(k.4v!=a){3.o.3h=14(5(){p q,s,M,g;6(3.o.4u===\'4t\'){3.1v=S;g=3.1j;15(s=0,M=g.N;s<M;s++){q=g[s];q()}3.1j=u 0;4 3.o.3h=a}},3)}e{3.o.4s=14(5(){p q,s,M,g;3.1v=S;g=3.1j;15(s=0,M=g.N;s<M;s++){q=g[s];q()}4 3.1j=u 0},3)}3.1r(14(5(){6(3.o.3g!=a){3.k=3.o.3g}e{3.k=3.o.37.k}6(!(3.k.y!=a)){3.k.4r(\'<y></y>\')}3.y=3.k.y;6(x.x===\'3f\'&&x.3e<9){3.y.w.2l=""+3.o.1P+"3d";3c(14(5(){6((3.o!=a)&&(3.y!=a)&&3.o.1P!==3.y.1P){3.y.w.2l=""+3.o.1P+"3d"}4 3c(3b.4q,2k)},3),2k)}e{3.y.w.4p=\'Y\';3.y.w.2l=\'2k%\'}6(3.y.3a!=a){3.y.3a=V}6(3.y.39!=a){3.y.39=S}e 6(3.k.38!=a){3.k.38=\'4o\'}4 3.I=3.o.37},3))}J.7.1r=5(q){6(3.1v){4 q()}e{4 3.1j.1D(q)}};J.7.1q=5(){4 3.1v};J.7.1n=5(c){4 3.k.1n(c)};J.7.1p=5(c){4 3.k.1p(c)};J.7.1H=5(c){4 3.k.1H(c)};J.7.1G=5(c){4 3.k.1G(c)};J.7.1F=5(c){4 3.k.1F(c)};J.7.b=5(c,D,j){6(D==a){D=V}6(j==a){j=a}4 3.k.b(c,D,j)};4 J})();G=(5(){5 G(){}G.7.1u=5(f){4!(f.2e!=a)};G.7.20=5(L){p 12;12=k.1Z(\'2W\');12.19=L;4 12.2e};G.7.2X=5(1d,1c){p 2h,2g,2f,2j,g,2i;2j=5(1d,1c){p F,1O,j;15(F 1C 1d){j=1d[F];6(j 35 4n){1O=2j(j,1c[F])}e{1O=j===1c[F]}6(!1O){4 V}}4 S};2h=((g=1d.24)!=a?g.23():u 0)===((2i=1c.24)!=a?2i.23():u 0);2g=1d.36===1c.36;2f=1d.22(\'w\')===1c.22(\'w\');4 2h&&2g&&2f};G.7.Q=5(f,1N){p 1i;6(1N==a){1N=V}1i=1N?\'4m\':\'2e\';1o(!3.1u(f)){f=f[1i]}4 f};G.7.29=5(f,Q){6(Q==a){Q=V}1o(!f.m){f=f.d;6(!f){4 a}}f=f.m;6(Q){f=3.Q(f,V)}4 f};G.7.2a=5(f,Q){6(Q==a){Q=V}1o(!f.1B){f=f.d;6(!f){4 a}}f=f.1B;6(Q){f=3.Q(f,S)}4 f};G.7.1t=5(n,q,P,O){p 1L,1K,m,d,1J,Y,17;6(P==a){P=u 0}6(O==a){O=u 0}Y=n.4l;6(P==a){P=0}6(O==a){O=Y.N}6(P===0&&O===Y.N){4 q(n)}e{1L=Y.1M(0,P);1K=Y.1M(P,O);1J=Y.1M(O,Y.N);d=n.d;m=n.m;d.1l(n);6(1L.N>0){17=k.2d(1L);d.1a(17,m)}6(1K.N>0){17=k.2d(1K);d.1a(17,m);n=17}6(1J.N>0){17=k.2d(1J);d.1a(17,m)}4 q(n)}};G.7.2c=5(f,q,P,O){p 1i,s,M,g,C;6(P==a){P=u 0}6(O==a){O=u 0}6(3.1u(f)){4 3.1t(f,q,P,O)}e{g=f.2b;C=[];15(s=0,M=g.N;s<M;s++){1i=g[s];C.1D(3.2c(1i,q))}4 C}};G.7.21=5(H,q){p W,1s,1b,28,R,X,16,1h,g,C;6(H.4k){6(((g=I.11)!=a?g.1E:u 0)!=a){4 11.1E("4j 4i 4h")}}e{R=H.4g(0);X=R.X;1h=R.1h;W=R.W;1b=R.1b;H.4f();6(X===W){4 3.2c(X,q,1h,1b)}e{6(!3.1u(X)){16=X.2b[1h]}e{16=3.29(X,S);3.1t(X,q,1h,u 0)}6(!3.1u(W)){6(1b>0){1s=W.2b[1b-1]}e{1s=3.2a(W,S)}}e{1s=3.2a(W,S);3.1t(W,q,u 0,1b)}C=[];1o(16){28=3.29(16,S);3.1t(16,q);6(16===1s){4e}C.1D(16=28)}4 C}}};4 G})();3.8=(5(){5 8(o){3.o=o;6((I.34!=a)&&3.o 35 34){3.o=3.o.4d(0)}3.r=27 J(3.o);3.1f=27 G;3.r.1r(14(5(){p L;6(3.o.19!=a){L=3.o.19;L=L.33(\'&4c;\').32(\'<\');L=L.33(\'&4b;\').32(\'>\');4 3.31(L)}},3))}8.7.1q=5(){4 3.r.1q()};8.7.1r=5(q){4 3.r.1r(q)};8.7.4a=5(){6(3.1q()){4 3.r.y.19}};8.7.31=5(j){6(3.1q()){4 3.r.y.19=j}};8.7.1n=5(c){p 26;2Z(x.x){25\'1I\':4 a;25\'1w\':26=[\'1z\',\'49\',\'2K\',\'1y\',\'2D\',\'2C\',\'2B\',\'2A\',\'1x\',\'1V\',\'1U\',\'1W\',\'48\'];6(30.2y(26,c)<0){4 a}}4 3.r.1n(c)};8.7.1p=5(c){2Z(x.x){25\'1I\':4 S}4 3.r.1p(c)};8.7.1H=5(c){4 3.r.1H(c)};8.7.1G=5(c){4 3.r.1G(c)};8.7.1F=5(c){4 3.r.1F(c)};8.7.b=5(c,D,j){p g;6(D==a){D=u 0}6(j==a){j=u 0}6(!3.1p(c)){6(((g=I.11)!=a?g.1E:u 0)!=a){11.1E(""+c+" 47 46 45 1C 3 x")}4}6((D!=a)&&!(j!=a)){j=D;D=V}4 3.r.b(c,D,j)};8.7.44=5(c,D,j){p C;6(D==a){D=u 0}6(j==a){j=u 0}3.b(c,D,j);C=[];1o(3.1n(c)){C.1D({})}4 C};8.7.w=5(1m){p H,1g,g;6(3.r.I.1k!=a){1g=14(5(n){p 13,F,m,d,j,E,g;d=n.d;6(!n.1B&&!n.m){6(((g=d.24)!=a?g.23():u 0)===\'2Y\'){15(F 1C 1m){j=1m[F];6(d.w[F]===j){d.w[F]=\'\'}e{d.w[F]=j}}6(d.22(\'w\')===\'\'){m=d.m;13=d.d;13.1l(d);13.1a(n,m)}4}}E=k.1Z(\'2Y\');15(F 1C 1m){j=1m[F];E.w[F]=j}m=n.m;d.1l(n);E.1Y(n);4 d.1a(E,m)},3);H=3.r.I.1k();4 3.1f.21(H,1g)}e{6(((g=I.11)!=a?g.1A:u 0)!=a){4 11.1A("8.w 2V 2U\'t 2T 3 x.")}}};8.7.U=5(L){p 12,R,H,1g,E,g;6(3.r.I.1k!=a){1g=14(5(n){p 13,m,d,E;E=3.1f.20(L);d=n.d;6(!n.1B&&!n.m){6(3.1f.2X(d,E)){m=d.m;13=d.d;13.1l(d);13.1a(n,m);4}}m=n.m;d.1l(n);E.1Y(n);4 d.1a(E,m)},3);H=3.r.I.1k();4 3.1f.21(H,1g)}e 6(3.r.k.H!=a){3.r.I.43();R=3.r.k.H.42();E=3.1f.20(L);E.19=R.41;12=k.1Z(\'2W\');12.1Y(E);4 R.40(12.19)}e{6(((g=I.11)!=a?g.1A:u 0)!=a){4 11.1A("8.U 2V 2U\'t 2T 3 x.")}}};8.7.K=5(){6(3.r.I.1k!=a){4 2}e 6(3.r.k.H!=a){4 1}4 0};8.7.3Z=5(1X){6(3.K()===2){4 3.U("<h"+1X+">")}e{4 3.b(\'3Y\',"<h"+1X+">")}};8.7.1z=5(){6(3.K()>0){4 3.U(\'<2S>\')}e{4 3.b(\'1z\')}};8.7.2S=8.1z;8.7.1y=5(){6(3.K()>0){4 3.U(\'<2R>\')}e{4 3.b(\'1y\')}};8.7.2R=8.1y;8.7.1W=5(){6(3.K()>0){4 3.U(\'<3X>\')}e{4 3.b(\'1W\')}};8.7.1x=5(){6(3.K()>0){4 3.U(\'<2Q>\')}e{4 3.b(\'1x\')}};8.7.2Q=8.1x;8.7.1V=5(){6(3.K()>0){4 3.U(\'<3W>\')}e{4 3.b(\'1V\')}};8.7.1U=5(){6(3.K()>0){4 3.U(\'<3V>\')}e{4 3.b(\'1U\')}};8.7.3U=5(18){6(3.K()===2){4 3.w({18:18})}e{4 3.b(\'3T\',18)}};8.7.3S=5(18){p c;6(3.K()===2){3.w({3R:18})}e{6(x.x===\'1w\'){c=\'3Q\'}e{c=\'3P\'}}4 3.b(c,18)};8.7.3O=5(1T){6(3.K()===2){4 3.w({3N:1T})}e{4 3.b(\'3M\',1T)}};8.7.2P=5(1S){6(3.K()===2){4 3.w({2P:1S})}e{4 3.b(\'3L\',1S)}};8.7.2O=5(){4 3.b(\'2O\')};8.7.2N=5(){4 3.b(\'2N\')};8.7.3K=5(2M){4 3.b(\'3J\',2M)};8.7.3I=5(2L){4 3.b(\'3H\',2L)};8.7.3G=5(){4 3.b(\'3F\')};8.7.3E=5(){4 3.b(\'2K\')};8.7.3D=5(){4 3.b(\'3C\')};8.7.2J=5(){4 3.b(\'2J\')};8.7.2I=5(){4 3.b(\'2I\')};8.7.2H=5(){4 3.b(\'2H\')};8.7["2G"]=5(){4 3.b(\'2G\')};8.7.2F=5(){4 3.b(\'2F\')};8.7.2E=5(){4 3.b(\'2E\')};8.7.3B=5(){4 3.b(\'2D\')};8.7.3A=5(){4 3.b(\'2C\')};8.7.3z=5(){4 3.b(\'2B\')};8.7.3y=5(){4 3.b(\'2A\')};8.7.3x=5(){4 3.b(\'3w\')};8.7.2z=5(){4 3.b(\'2z\')};4 8})()}).2y(3);',62,295,'|||this|return|function|if|prototype|Richarea||null|execCommand|command|parentNode|else|node|_ref|||value|document||nextSibling|leaf|iframe|var|callback|raw|_i||void|identify|style|browser|body|navigator|string|subString|_results|ui|wrap|key|DOMMunipulator|selection|window|RawController|isSurroundSupport|html|_len|length|end|start|dig|range|true|row|surround|false|endContainer|startContainer|text|Browser|userAgent|console|container|grandParentNode|__bind|for|startLeaf|textNode|color|innerHTML|insertBefore|endOffset|rhs|lhs|versionSearch|munipulator|surroundCallback|startOffset|child|_callbacks|getSelection|removeChild|sets|queryCommandState|while|queryCommandEnabled|isReady|ready|endLeaf|execAtLeaf|isLeaf|_hasLoaded|Firefox|strikethrough|italic|bold|error|previousSibling|in|push|warn|queryCommandValue|queryCommandSupported|queryCommandIndeterm|Chrome|right|middle|left|substring|reverse|result|offsetHeight|vendor|index|size|name|superscript|subscript|underline|level|appendChild|createElement|createElementFromHTML|execAtSelection|getAttribute|toLowerCase|tagName|case|WORKS|new|nextLeaf|next|previous|childNodes|execAtNode|createTextNode|firstChild|c3|c2|c1|_ref2|deepEqual|100|height|platform|Mozilla|Netscape|OmniWeb|versionSearchString|dataString|indexOf|searchVersion|data|searchString|unknown|An|call|unselect|justifyright|justifyleft|justifyfull|justifycenter|redo|undo|delete|paste|cut|copy|insertunorderedlist|src|href|outdent|indent|fontSize|del|em|strong|support|doesn|method|div|compare|span|switch|__indexOf|setValue|join|split|jQuery|instanceof|className|contentWindow|designMode|contentEditable|spellcheck|arguments|setTimeout|px|version|Explorer|contentDocument|onreadystatechange|Linux|iPhone|Mac|dataOS|MSIE|Camino|iCab|Version|prop|dataBrowser|OS|item|me|fn|selectall|selectAll|justifyRight|justifyLeft|justifyFull|justifyCenter|inserthorizontalrule|insertHorizontalRule|insertUnorderedList|insertorderedlist|insertOrderedList|insertimage|insertImage|createlink|insertLink|fontsize|fontname|fontFamily|fontName|backcolor|hilitecolor|backgroundColor|backColor|forecolor|foreColor|sup|sub|ins|formatblock|heading|pasteHTML|htmlText|createRange|focus|execCommandAndWait|enabled|not|is|unlink|insertorderlist|getValue|gt|lt|get|break|removeAllRanges|getRangeAt|selected|has|Nothing|isCollapsed|textContent|lastChild|Object|On|cursor|callee|writeln|onload|complete|readyState|all|iPad|Windows|Win|rv|Gecko|Konqueror|KDE|Opera|opera|Safari|Apple|parseFloat|appVersion|Array|apply'.split('|')))
